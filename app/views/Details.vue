<template>
  <Page>
    <ActionBar :title="flick.title" />
    <ScrollView height="100%">
      <StackLayout>
        <Image margin="0" stretch="aspectFill" :src="flick.image" />
        <StackLayout padding="10 20">
          <StackLayout v-for="detail in flick.details" :key="detail.id">
            <Label
              marginTop="15"
              fontSize="16"
              fontWeight="700"
              class="text-primary"
              textWrap="true"
              :text="detail.title"
            />
            <Label
              fontSize="14"
              class="text-secondary"
              textWrap="true"
              :text="detail.body"
            />
          </StackLayout>
        </StackLayout>
      </StackLayout>
    </ScrollView>
  </Page>
</template>

<script lang="ts">
import Vue from "nativescript-vue";
import { GetFlickById, FlickDetail } from "../models/Flick";
interface Data {
  flick: FlickDetail;
}
export default Vue.extend({
  props: {
    id: Number,
  },
  data(): Data {
    return {
      flick: {
        id: 0,
        genre: "",
        title: "",
        image: "",
        url: "",
        description: "",
        details: [],
      },
    };
  },
  computed: {
    hasContent() {
      return this.flick ? true : false;
    },
  },
  mounted: function () {
    GetFlickById(this.id).then((res) => {
      this.flick = res;
    });
  },
});
</script>