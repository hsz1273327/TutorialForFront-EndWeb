
# ç±»å‹ç³»ç»Ÿ

Typescriptæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æœ‰å®Œå¤‡çš„ç±»å‹ç³»ç»Ÿå’ŒèŒƒå‹ç³»ç»Ÿ,è¿™å¯ä»¥ä½¿ä»£ç æ›´åŠ å¥å£®ä¹Ÿæ›´ä¾¿äºç»´æŠ¤

# ç±»å‹å£°æ˜

tsæ”¯æŒç±»å‹å£°æ˜,å¯ä»¥å£°æ˜çš„åŒ…æ‹¬:

+ å¸¸é‡å˜é‡
+ ç±»ä¸­çš„å±æ€§
+ å‡½æ•°,æ–¹æ³•çš„å‚æ•°
+ å‡½æ•°çš„è¿”å›å€¼

å£°æ˜çš„æ–¹æ³•å’Œpythonçš„typehintsä¸€æ ·,å°±æ˜¯åå­—åé¢ç”¨`':'`æŒ‡å®šç±»å‹


```typescript
const a :string =  "å¸¸é‡"
```


```typescript
a
```

    å¸¸é‡


## ç±»å‹æ¨æ–­

åœ¨åŸç‰ˆjsä¸­æ˜¯æ²¡æœ‰ç±»å‹å£°æ˜çš„,TSä¹Ÿå¯ä»¥ä¸å£°æ˜,ä½†å®é™…ä¸Šå®ƒä½¿ç”¨äº†ç±»å‹æ¨æ–­æŠ€æœ¯


```typescript
let x = 3
```


```typescript
typeof(x)
```

    number


å½“éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹æ—¶å€™ä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹.ä¾‹å¦‚:


```typescript
let x = [0, 1, null];
```

ä¸ºäº†æ¨æ–­xçš„ç±»å‹,æˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹.è¿™é‡Œæœ‰ä¸¤ç§ç±»å‹:`number`å’Œ`null`.è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹,å¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹.

ç±»å‹æ¨æ–­è™½ç„¶æ–¹ä¾¿,ä½†å¾ˆå¤šæ—¶å€™å¹¶ä¸èƒ½å¦‚æˆ‘ä»¬æ‰€æƒ³çš„é‚£æ ·.ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹,æœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹,ä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹.


```typescript
class Animal{
    name
    constructor(name){
     this.name = name
    }
    move(distanceInMeters: number = 0) {
        console.log(`${this.name} moved ${distanceInMeters}m.`);
    }
}
```


```typescript
class Snake extends Animal {
    constructor(name) { super(name); }
    move(distanceInMeters = 5) {
        console.log("Slithering...");
        super.move(distanceInMeters);
    }
}
```


```typescript
class Horse extends Animal {
    constructor(name) { super(name); }
    move(distanceInMeters = 45) {
        console.log("Galloping...");
        super.move(distanceInMeters);
    }
}
```


```typescript
let sam = new Snake("Sammy the Python")
let tom: Animal = new Horse("Tommy the Palomino")
```


```typescript
sam.move()
```

    Slithering...
    Sammy the Python moved 5m.



```typescript
tom.move(34)
```

    Galloping...
    Tommy the Palomino moved 34m.



```typescript
let zoo = [new Horse("h"), new Snake("s")]
```

æˆ‘ä»¬æƒ³è®©zooè¢«æ¨æ–­ä¸ºAnimal[]ç±»å‹,ä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯Animalç±»å‹çš„,å› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœ.ä¸ºäº†æ›´æ­£,å½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹


```typescript
let zoo: Animal[] = [new Horse("h"), new Snake("s")]
```

## èŒƒå‹ç³»ç»Ÿ

è½¯ä»¶å·¥ç¨‹ä¸­,æˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„API,åŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§.ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹,åŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹,è¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½.

åœ¨åƒC#å’ŒJavaè¿™æ ·çš„è¯­è¨€ä¸­å¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶,ä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®.è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶.

ä¾‹:


```typescript
function identity<T>(arg: T): T {
    return arg;
}
```

æˆ‘ä»¬ç»™`identity`æ·»åŠ äº†ç±»å‹å˜é‡`T`.`T`å¸®åŠ©æˆ‘ä»¬æ•è·ç”¨æˆ·ä¼ å…¥çš„ç±»å‹(æ¯”å¦‚`number)`),ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹.ä¹‹åæˆ‘ä»¬å†æ¬¡ä½¿ç”¨äº†`T`å½“åšè¿”å›å€¼ç±»å‹.ç°åœ¨æˆ‘ä»¬å¯ä»¥çŸ¥é“å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç±»å‹æ˜¯ç›¸åŒçš„äº†.è¿™å…è®¸æˆ‘ä»¬è·Ÿè¸ªå‡½æ•°é‡Œä½¿ç”¨çš„ç±»å‹çš„ä¿¡æ¯

æˆ‘ä»¬æŠŠè¿™ä¸ªç‰ˆæœ¬çš„`identity`å‡½æ•°å«åšæ³›å‹,å› ä¸ºå®ƒå¯ä»¥é€‚ç”¨äºå¤šä¸ªç±»å‹.ä¸åŒäºä½¿ç”¨`any`,å®ƒä¸ä¼šä¸¢å¤±ä¿¡æ¯,åƒç¬¬ä¸€ä¸ªä¾‹å­é‚£åƒä¿æŒå‡†ç¡®æ€§,ä¼ å…¥æ•°å€¼ç±»å‹å¹¶è¿”å›æ•°å€¼ç±»å‹.

æˆ‘ä»¬å®šä¹‰äº†æ³›å‹å‡½æ•°åå¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•ä½¿ç”¨:

+ ç¬¬ä¸€ç§æ˜¯ä¼ å…¥æ‰€æœ‰çš„å‚æ•°,åŒ…å«ç±»å‹å‚æ•°


```typescript
let output1 = identity<string>("myString") // type of output will be 'string'
output1
```

    myString


è¿™é‡Œæˆ‘ä»¬æ˜ç¡®çš„æŒ‡å®šäº†`T`æ˜¯`string`ç±»å‹,å¹¶åšä¸ºä¸€ä¸ªå‚æ•°ä¼ ç»™å‡½æ•°,ä½¿ç”¨äº†`<>`æ‹¬èµ·æ¥è€Œä¸æ˜¯`()`

+ ç¬¬äºŒç§æ–¹æ³•æ›´æ™®é,åˆ©ç”¨äº†ç±»å‹æ¨è®º--å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šTçš„ç±»å‹:


```typescript
let output2 = identity("myString")
output2
```

    myString


æ³¨æ„æˆ‘ä»¬æ²¡å¿…è¦ä½¿ç”¨å°–æ‹¬å·`<>`æ¥æ˜ç¡®åœ°ä¼ å…¥ç±»å‹,ç¼–è¯‘å™¨å¯ä»¥æŸ¥çœ‹myStringçš„å€¼,ç„¶åæŠŠTè®¾ç½®ä¸ºå®ƒçš„ç±»å‹.ç±»å‹æ¨è®ºå¸®åŠ©æˆ‘ä»¬ä¿æŒä»£ç ç²¾ç®€å’Œé«˜å¯è¯»æ€§.å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿè‡ªåŠ¨åœ°æ¨æ–­å‡ºç±»å‹çš„è¯åªèƒ½åƒä¸Šé¢é‚£æ ·æ˜ç¡®çš„ä¼ å…¥`T`çš„ç±»å‹,åœ¨ä¸€äº›å¤æ‚çš„æƒ…å†µä¸‹è¿™æ˜¯å¯èƒ½å‡ºç°çš„.

### æ³›å‹ç±»å‹

æ³›å‹å‡½æ•°çš„ç±»å‹ä¸éæ³›å‹å‡½æ•°çš„ç±»å‹æ²¡ä»€ä¹ˆä¸åŒ,åªæ˜¯æœ‰ä¸€ä¸ªç±»å‹å‚æ•°åœ¨æœ€å‰é¢,åƒå‡½æ•°å£°æ˜ä¸€æ ·


```typescript
function identity<T>(arg: T): T {
    return arg;
}

let myIdentity: <T>(arg: T) => T = identity;
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ³›å‹å‚æ•°å,åªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥


```typescript
function identity<T>(arg: T): T {
    return arg;
}

let myIdentity: <U>(arg: U) => U = identity;

```

### æ³›å‹æ¥å£

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°:


```typescript
interface GenericIdentityFn {
    <T>(arg: T): T;
}

function identity<T>(arg: T): T {
    return arg;
}

let myIdentity: GenericIdentityFn = identity;
```

ä¸€ä¸ªç›¸ä¼¼çš„ä¾‹å­:æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°.è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹(æ¯”å¦‚`Dictionary<string>`è€Œä¸åªæ˜¯`Dictionary`).è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº†.


```typescript
interface GenericIdentityFn<T> {
    (arg: T): T;
}

function identity<T>(arg: T): T {
    return arg;
}

let myIdentity: GenericIdentityFn<number> = identity;
```

### æ³›å‹ç±»

æ³›å‹ç±»çœ‹ä¸Šå»ä¸æ³›å‹æ¥å£å·®ä¸å¤š.æ³›å‹ç±»ä½¿ç”¨`<>`æ‹¬èµ·æ³›å‹ç±»å‹,è·Ÿåœ¨ç±»ååé¢.


```typescript
class GenericNumber<T> {
    zeroValue: T
    add: (x: T, y: T) => T
}

let myGenericNumber = new GenericNumber<number>()
myGenericNumber.zeroValue = 0
myGenericNumber.add = function(x, y) { return x + y; }
```

    [36m[Function (anonymous)][39m


GenericNumberç±»çš„ä½¿ç”¨æ˜¯ååˆ†ç›´è§‚çš„,å¹¶ä¸”ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†æ²¡æœ‰ä»€ä¹ˆå»é™åˆ¶å®ƒåªèƒ½ä½¿ç”¨numberç±»å‹.ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶å®ƒæ›´å¤æ‚çš„ç±»å‹.

ä¸æ¥å£ä¸€æ ·ç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹.

æˆ‘ä»¬åœ¨é¢å‘å¯¹è±¡éƒ¨åˆ†ä»‹ç»è¿‡ç±»æœ‰ä¸¤éƒ¨åˆ†:é™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†.æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹,æ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹.

### æ³›å‹çº¦æŸ

ä½ åº”è¯¥ä¼šè®°å¾—ä¹‹å‰çš„ä¸€ä¸ªä¾‹å­,æˆ‘ä»¬æœ‰æ—¶å€™æƒ³æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼,å¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§.åœ¨`loggingIdentity`ä¾‹å­ä¸­æˆ‘ä»¬æƒ³è®¿é—®`arg`çš„`length`å±æ€§,ä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰`length`å±æ€§,æ‰€ä»¥å°±æŠ¥é”™äº†.


```typescript
function loggingIdentity<T>(arg: T): T {
    console.log(arg.length);  // Error: T doesn't have .length
    return arg;
}
```

    2:21 - Property 'length' does not exist on type 'T'.


ä¸ºæ­¤æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶.åˆ›å»ºä¸€ä¸ªåŒ…å«`.length`å±æ€§çš„æ¥å£,ä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ`extends`å…³é”®å­—è¿˜å®ç°çº¦æŸ:


```typescript
interface Lengthwise {
    length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
    console.log(arg.length);  // Now we know it has a .length property, so no more error
    return arg;
}
```

ç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸ,å› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹,æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼å¿…é¡»åŒ…å«å¿…é¡»çš„å±æ€§.

### åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹

åœ¨TypeScriptä½¿ç”¨æ³›å‹åˆ›å»ºå·¥å‚å‡½æ•°æ—¶éœ€è¦å¼•ç”¨æ„é€ å‡½æ•°çš„ç±»ç±»å‹.æ¯”å¦‚:


```typescript
function create<T>(c: {new(): T; }): T {
    return new c();
}
```


```typescript

```
