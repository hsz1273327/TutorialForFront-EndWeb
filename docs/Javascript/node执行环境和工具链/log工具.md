# logå·¥å…·

ç”±äºjsåœ¨è®¾è®¡ä¹‹åˆæ˜¯ä½œä¸ºæµè§ˆå™¨è„šæœ¬çš„,å› æ­¤è¿˜æ˜¯é¢„ç•™äº†è°ƒè¯•ç”¨çš„logæ¨¡å—`console`çš„.ä½†å®ƒæ˜¯ä¸å®Œå¤‡çš„,å®ƒæ— æ³•ä¸ºlogè®¾å®šæ˜¾ç¤ºç­‰çº§,ä¹Ÿæ— æ³•å°†logè¾“å‡ºè‡³æ–‡ä»¶æˆ–è€…å…¶ä»–åª’ä»‹.ä¸ªäººè®¤ä¸ºè¾“å‡ºè‡³å…¶ä»–åª’ä»‹å¹¶ä¸æ˜¯logæ¨¡å—æœ¬èº«æœ€å…³å¿ƒçš„,ä½†æ²¡æ³•è®¾ç½®logçš„æ˜¾ç¤ºç­‰çº§æ˜¯éå¸¸ä¸ç°ä»£çš„.

è¿˜æ˜¯å¾—åæ§½ä¸‹jsçš„ç®€é™‹,è¿logå·¥å…·åŠŸèƒ½éƒ½ä¸é½.

## consoleå¯¹è±¡

`console`æ˜¯æŒ‡çš„æ§åˆ¶å°,jsæ˜¯å•çº¿ç¨‹çš„,å› æ­¤å®ƒçš„logå…¶å®å’Œpythonä¸­çš„`print`å·®ä¸å¤š,å°±æ˜¯å°†æ–‡æœ¬ä¿¡æ¯è¾“å‡ºåˆ°ç‰¹å®šä½ç½®è€Œå·²,åœ¨æµè§ˆå™¨ä¸­å°±æ˜¯æ§åˆ¶å°,åœ¨node.jsä¸­å°±æ˜¯terminalçš„æ ‡å‡†è¾“å…¥è¾“å‡º.

å¦‚æœä½¿ç”¨typescript,consoleä¸ä¼šé»˜è®¤å­˜åœ¨,éœ€è¦`lib`ä¸­å¼•å…¥`DOM`æ‰ä¼šå¯ç”¨.

### logåˆ†çº§

å®é™…ä¸Šæ ‡å‡†çš„logæ˜¯æœ‰åˆ†çº§çš„,æ ‡å‡†æ˜¯4ä¸ªç­‰çº§:

æµ‹è¯•:

```javascript
console.log('æ–‡å­—ä¿¡æ¯')
```

ç»“æœ:

```javascript
æ–‡å­—ä¿¡æ¯
```

æµ‹è¯•:

```javascript
console.info('æç¤ºä¿¡æ¯')
```

ç»“æœ:

```javascript
æç¤ºä¿¡æ¯
```

æµ‹è¯•:

```javascript
console.warn('è­¦å‘Šä¿¡æ¯')
```

ç»“æœ:

```javascript
è­¦å‘Šä¿¡æ¯
```

æµ‹è¯•:

```javascript
console.error('é”™è¯¯ä¿¡æ¯')
```

ç»“æœ:

```javascript
é”™è¯¯ä¿¡æ¯
```

#### logçš„æ ¼å¼åŒ–è¾“å‡º

å ä½ç¬¦|å«ä¹‰
---|---
`%s`|ç¬¦ä¸²è¾“å‡º
`%d or %i`|æ•´æ•°è¾“å‡º
`%f`|æµ®ç‚¹æ•°è¾“å‡º
`%o`|æ‰“å°javascriptå¯¹è±¡ï¼Œå¯ä»¥æ˜¯æ•´æ•°ã€å­—ç¬¦ä¸²ä»¥åŠJSONæ•°æ®

### åˆ†ç»„è¾“å‡º

æ‰€è°“æ˜¯åˆ†ç»„å…¶å®å°±æ˜¯ç¼©è¿›.åˆ†ç»„å¯ä»¥å¤šå±‚åµŒå¥—

ä½¿ç”¨`console.group()`å’Œ`console.groupEnd()`åŒ…è£¹åˆ†ç»„å†…å®¹.

è¿˜å¯ä»¥ä½¿ç”¨`console.groupCollapsed()`æ¥ä»£æ›¿`console.group()`ç”ŸæˆæŠ˜å çš„åˆ†ç»„.

è¿™ç§ç”¨æ³•æœ‰ç‚¹åƒpythonä¸­ä¸Šä¸‹æ–‡çš„æ„Ÿè§‰.

æµ‹è¯•:

```javascript
console.group('ç¬¬ä¸€ä¸ªç»„')
console.log("1-1")
console.log("1-2")
console.log("1-3")
console.groupEnd()

console.groupCollapsed('ç¬¬äºŒä¸ªç»„')
console.log("2-1")
console.log("2-2")
console.log("2-3")
console.groupEnd()
```

ç»“æœ:

```javascript
ç¬¬ä¸€ä¸ªç»„
    1-1
    1-2
    1-3
ç¬¬äºŒä¸ªç»„
    2-1
    2-2
    2-3
```

### è¡¨æ ¼è¾“å‡º

ä½¿ç”¨console.table()å¯ä»¥å°†ä¼ å…¥çš„å¯¹è±¡,Mapæˆ–æ•°ç»„ä»¥è¡¨æ ¼å½¢å¼è¾“å‡º,è¿™ä¸ªå‡½æ•°é€‚åˆè¾“å‡ºæ ¼å¼åŒ–æ•°æ®

ä¾‹å­:

```javascript
console.table({
    a:1,
    b:2
})
```

ç»“æœ:

```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Values â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    a    â”‚   [33m1[39m    â”‚
â”‚    b    â”‚   [33m2[39m    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ä¾‹å­:

```javascript
console.table([1,2,3,4])
```

ç»“æœ:

```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (index) â”‚ Values â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    0    â”‚   [33m1[39m    â”‚
â”‚    1    â”‚   [33m2[39m    â”‚
â”‚    2    â”‚   [33m3[39m    â”‚
â”‚    3    â”‚   [33m4[39m    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ä¾‹å­:

```javascript
console.table(new Map([['one',1], ['two', 2], ['three', 3]]))
```

ç»“æœ:

```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (iteration index) â”‚   Key   â”‚ Values â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [33m0[39m         â”‚  [32m'one'[39m  â”‚   [33m1[39m    â”‚
â”‚         [33m1[39m         â”‚  [32m'two'[39m  â”‚   [33m2[39m    â”‚
â”‚         [33m2[39m         â”‚ [32m'three'[39m â”‚   [33m3[39m    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ä¾‹å­:

```javascript
console.table(new Set(["a","b","c"]))
```

ç»“æœ:

```javascript
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (iteration index) â”‚ Values â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [33m0[39m         â”‚  [32m'a'[39m   â”‚
â”‚         [33m1[39m         â”‚  [32m'b'[39m   â”‚
â”‚         [33m2[39m         â”‚  [32m'c'[39m   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŸ¥çœ‹å¯¹è±¡

ä½¿ç”¨Console.dir()æ˜¾ç¤ºä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•,è¿™ä¸ªå°±æœ‰ç‚¹åƒpythonä¸­çš„dir(obj)

æµ‹è¯•:

```javascript
console.dir({
    a:1,
    b:2,
    c:()=>1
})
```

ç»“æœ:

```javascript
{ a: [33m1[39m, b: [33m2[39m, c: [36m[Function: c][39m }
```

### æŸ¥çœ‹domèŠ‚ç‚¹

`console.dirxml()`è¿™ä¸ªæ¥å£ç®—æ˜¯æµè§ˆå™¨è„šæœ¬æ—¶ä»£é—ç•™çš„ç‰¹æœ‰æ¥å£,ç”¨äºæŸ¥çœ‹`html/xml`ç”Ÿæˆçš„domèŠ‚ç‚¹

æµ‹è¯•:

```javascript
console.dirxml(`<ul id="box">
  <li>èš‚èšéƒ¨è½ä¸€</li>
  <li>èš‚èšéƒ¨è½äºŒ</li>
  <li>èš‚èšéƒ¨è½ä¸‰</li>
  <li>èš‚èšéƒ¨è½å››</li>
</ul>`)
```

ç»“æœ:

```javascript
<ul id="box">
    <li>èš‚èšéƒ¨è½ä¸€</li>
    <li>èš‚èšéƒ¨è½äºŒ</li>
    <li>èš‚èšéƒ¨è½ä¸‰</li>
    <li>èš‚èšéƒ¨è½å››</li>
</ul>
```

### æ¡ä»¶è¾“å‡º

`console.assert(exp,msg)`è¿™ä¸ªæ¥å£åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¼assertçš„æ›¿ä»£

æµ‹è¯•:

```javascript
console.assert(true, "ä½ æ°¸è¿œçœ‹ä¸è§æˆ‘")
```

ç»“æœ:

```javascript
Assertion failed: ä½ æ°¸è¿œçœ‹ä¸è§æˆ‘
```

### è®¡æ¬¡è¾“å‡º

ä½¿ç”¨`console.count(tag)`è¾“å‡ºå†…å®¹å’Œè¢«è°ƒç”¨çš„æ¬¡æ•°å¯ä»¥ä½¿ç”¨`console.countReset(tag)`é‡ç½®è¢«è°ƒç”¨çš„æ¬¡æ•°

æµ‹è¯•:

```javascript
(()=> {
    for(let i = 0; i < 3; i++){
        console.count("è¿è¡Œæ¬¡æ•°ï¼š")
    }
    console.count("è¿è¡Œæ¬¡æ•°1ï¼š")
})()
```

ç»“æœ:

```javascript
è¿è¡Œæ¬¡æ•°ï¼š: 1
è¿è¡Œæ¬¡æ•°ï¼š: 2
è¿è¡Œæ¬¡æ•°ï¼š: 3
è¿è¡Œæ¬¡æ•°1ï¼š: 1
```

### è¿½è¸ªè°ƒç”¨å †æ ˆ

ä½¿ç”¨Console.trace()æ¥è¿½è¸ªå‡½æ•°è¢«è°ƒç”¨çš„è¿‡ç¨‹,åœ¨å¤æ‚é¡¹ç›®æ—¶è°ƒç”¨è¿‡ç¨‹éå¸¸å¤š,ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°æ ˆä¸Šçš„ä¿¡æ¯

æµ‹è¯•:

```javascript
const add=(a, b)=> {
    console.trace("Add function")
    return a + b
}

const add3=(a, b)=> {
    return add2(a, b)
}

const add2=(a, b)=> {
    return add1(a, b)
}

const add1=(a, b) =>{
    return add(a, b)
}

let x = add3(1, 1)
```

ç»“æœ:

```javascript
Trace: Add function
    at add (evalmachine.<anonymous>:3:13)
    at add1 (evalmachine.<anonymous>:16:12)
    at add2 (evalmachine.<anonymous>:12:12)
    at add3 (evalmachine.<anonymous>:8:12)
    at evalmachine.<anonymous>:19:9
    at evalmachine.<anonymous>:22:3
    at sigintHandlersWrap (vm.js:274:15)
    at Script.runInContext (vm.js:128:14)
    at Object.runInContext (vm.js:295:6)
    at Object.execute (/usr/local/lib/node_modules/tslab/dist/executor.js:159:38)
```

### è®¡æ—¶åŠŸèƒ½

ä½¿ç”¨`console.time(tag)`å’Œ`console.timeEnd(tag)`åŒ…è£¹éœ€è¦è®¡æ—¶çš„ä»£ç ç‰‡æ®µ,è¾“å‡ºè¿è¡Œè¿™æ®µä»£ç çš„è¿è¡Œæ—¶é—´(æ¯«ç§’è®°).ä¸€ç»„timeä¸Šä¸‹æ–‡ä½¿ç”¨tagå‚æ•°åšæ ‡è¯†,ä¸€ä¸ªtagå°±æ˜¯ä¸€ä¸ªè®¡æ—¶å™¨,æœ€å¤šåŒæ—¶è¿è¡Œ10000ä¸ªè®¡æ—¶å™¨.åœ¨å…¶ä¸­å¯ä»¥æ’å…¥`console.timeLog(tag, value)`

æµ‹è¯•:

```javascript
console.time("Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´")
for(var i = 0; i < 10; i++)
{
console.timeLog("Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´", i)
}
console.timeEnd("Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´")
```

ç»“æœ:

```javascript
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 8.58ms [33m0[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 9.393ms [33m1[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 9.985ms [33m2[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 12.345ms [33m3[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 13.694ms [33m4[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 14.202ms [33m5[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 14.646ms [33m6[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 15.183ms [33m7[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 15.648ms [33m8[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 16.218ms [33m9[39m
Chromeä¸­å¾ªç¯1000æ¬¡çš„æ—¶é—´: 16.904ms
```

### æ€§èƒ½åˆ†æ

ä½¿ç”¨`console.profile()`å’Œ`console.profileEnd()`è¿›è¡Œæ€§èƒ½åˆ†æ,æŸ¥çœ‹ä»£ç å„éƒ¨åˆ†è¿è¡Œæ¶ˆè€—çš„æ—¶é—´.è¿™ä¸ªæ–¹æ³•åœ¨nodeä¸­éœ€è¦ä½¿ç”¨`--inspect`æ ‡ç­¾æ‰“å¼€è°ƒè¯•æ¨¡å¼æ‰å¯ä»¥ä½¿ç”¨

## ä½¿ç”¨pinoä¸°å¯ŒæœåŠ¡ç«¯log

å› æ­¤è¿™è¾¹æ¨èå…¨å¹³å°çš„logå·¥å…·.ä¸è¿‡æœ¬æ–‡è¿˜æ˜¯åªè®²æ ‡å‡†çš„logç”Ÿæˆå¯¹è±¡`console`
åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹,é»˜è®¤çš„consoleæ¨¡å—å°±å·²ç»è¶³å¤Ÿå¥½ç”¨,ä½†å¦‚æœæ˜¯æœåŠ¡ç«¯ä¸Š,ç”±äºæ²¡æœ‰æ ¼å¼å®šä¹‰å’Œlevelç­›é€‰,consoleæ¨¡å—å°±æœ‰ç‚¹ä¸å¤Ÿç”¨äº†.æˆ‘ä»¬å¯ä»¥ä½¿ç”¨[pino](https://www.npmjs.com/package/pino),è¿™ä¸ªæ˜¯ä¸€ä¸ªå…·å¤‡å®Œæ•´çš„logå·¥å…·ç‰¹æ€§çš„logå·¥å…·.

æµ‹è¯•:

```javascript
import pino from 'pino'

const logger = pino({name:"myapp"})
logger.info('hi')
logger.warn({lang: 'fr'}, 'au revoir')
```

ç»“æœ:

```javascript
{"level":30,"time":1581660580368,"pid":24419,"hostname":"huangsizhes-MacBook-Air.local","name":"myapp","msg":"hi","v":1}
{"level":40,"time":1581660580370,"pid":24419,"hostname":"huangsizhes-MacBook-Air.local","name":"myapp","lang":"fr","msg":"au revoir","v":1}
```

æµ‹è¯•:

```javascript
logger.level//æŸ¥çœ‹å½“å‰çš„æœ€ä½ç­‰çº§
```

ç»“æœ:

```javascript
'info'
```

æµ‹è¯•:

```javascript
logger.level="warn"//è®¾ç½®æœ€ä½ç­‰çº§
```

ç»“æœ:

```javascript
'warn'
```

æµ‹è¯•:

```javascript
logger.level
```

ç»“æœ:

```javascript
'warn'
```

### typescriptä½¿ç”¨pino

åœ¨typescriptä¸­æˆ‘ä»¬éœ€è¦é¢å¤–å®‰è£…pinoçš„ç±»å‹å£°æ˜åŒ…`@types/pino`æ‰èƒ½æ­£å¸¸çš„ä½¿ç”¨pino.
typescriptä¸­æˆ‘ä»¬å¿…é¡»ä½¿ç”¨`import * as Pino from 'pino'`æ‰å¯ä»¥æ­£å¸¸çš„å¯¼å…¥pino,,è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ†æ”¯[nodeæ‰§è¡Œç¯å¢ƒå’Œå·¥å…·é“¾-logå·¥å…· ](https://github.com/hsz1273327/TutorialForFront-EndWeb/tree/node%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%92%8C%E5%B7%A5%E5%85%B7%E9%93%BE-log%E5%B7%A5%E5%85%B7)

