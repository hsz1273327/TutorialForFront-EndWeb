# 输入型组件

由于移动设备屏幕小,一般没有表单概念,表单功能一般直接由一个页面提供.因此输入型组件主要都是些单独功能的组件,可以分为按钮,开关,选择器,多选器,滑块,时间选择器,文本输入框这么几个大类.native-script原生基本都有提供,社区也提供了一些.

## 按钮

+ [Button](https://nativescript-vue.org/cn/docs/elements/components/button/)
    原生的按钮组件,它只有`text`和`textWrap`两个属性,通过绑定`tap`,`doubleTap`,`longPress` 这些行为事件触发回调实现交互.值得注意的是对于图标的处理,在`资源设置`部分已经介绍过如何导入图标,Button的图标只要`text`中填入对应的`unicode`即可

+ [@nativescript-community/ui-material-button](https://www.npmjs.com/package/@nativescript-community/ui-material-button)
    material风格的按钮,是`Button`组件的扩展.要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-button`,然后在入口文件中导入它

    ```ts
    import ButtonPlugin from '@nativescript-community/ui-material-button/vue';

    Vue.use(ButtonPlugin);
    ```

    `@nativescript-community/ui-material-button`是`Button`组件的扩展,其用法也是它的超集,增加了`variant`属性用于确定基本样式,支持`contained`(默认,凸起按钮),`flat`(扁平按钮),`text`(文本按钮)三种.

### 悬浮操作按钮(FAB)

悬浮按钮应该是移动端特有的一种按钮类型,它本质上还是按钮,只是被特化为圆形只有图标的形式,一般放在屏幕右侧,相当醒目. 悬浮操作按钮一般放在突出显眼的位置,用于呼出菜单或者官方鼓励的高频快捷操作,在移动端设计上是一种比较常用的组件,比如百度贴吧的发帖按钮就是一个悬浮操作按钮.

+ [@nativescript-community/ui-material-floatingactionbutton](https://www.npmjs.com/package/@nativescript-community/ui-material-floatingactionbutton)
    material风格的悬浮操作按钮(FAB),依然是`Button`组件的扩展,只是其样式为悬浮图标.

    该按钮官方只推荐使用额外的属性`src`来指定一个已经注册的图片资源来作为图标.我个人尝试过使用`text`设置图标,配合`style`也可以做到构造一个圆形的按钮,但符号无法居中.

    要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-floatingactionbutton`,然后在入口文件中导入它

    ```ts
    import FloatingActionButtonPlugin from '@nativescript-community/ui-material-floatingactionbutton/vue';

    Vue.use(FloatingActionButtonPlugin);
    ```

+ [@nstudio/nativescript-floatingactionbutton](https://github.com/nstudio/nativescript-floatingactionbutton)**推荐使用**

    另一个material风格的悬浮操作按钮(FAB),相比`@nativescript-community/ui-material-floatingactionbutton`的优势是可以完美使用`text`设置图标,劣势是需要设置style.使用方法是需要在入口文件中导入

    ```ts
    Vue.registerElement(
        'Fab',
        () => require('@nstudio/nativescript-floatingactionbutton').Fab
    );
    ```

#### 快速拨号菜单(Speed dial)

快速拨号菜单可以理解为FAB的集成扩展,其形式就是展示一个图标按钮,点击后会呼出菜单让用户进行选择.[@nativescript-community/ui-material-speeddial](https://www.npmjs.com/package/@nativescript-community/ui-material-speeddial)实现了这一功能,旦他有几个缺陷:

1. 与底层导航冲突,底层导航会占掉约一半的快速拨号菜单启动按钮
2. 按钮无法设置为圆形,只能是固定的方形
3. 位置固定只有两个选择,要么左下角(默认)要么右下角,它通过属性`horizontalAlignment`选择`left`或者`right`确定

要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-speeddial`,然后在入口文件中导入它

```ts
import speeddialPlugin from '@nativescript-community/ui-material-speeddial/vue';

Vue.use(speeddialPlugin);
```

>例子:

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <Label text="Home" id="banner" ref="banner"></Label>
      <Button
        :text="`${iconUnicode('\uf067')} snackbar`"
        @tap="onActionTap"
        @doubleTap="onActionDoubleTap"
        @longPress="onActionLongPress"
        class="fas"
      />
      <MDButton
        :text="`${iconUnicode('\uf067')} snackbar`"
        @tap="onActionTap"
        @doubleTap="onActionDoubleTap"
        @longPress="onActionLongPress"
        class="fas"
      />
      <MDButton
        :text="`${iconUnicode('\uf067')} snackbar`"
        @tap="onActionTap"
        @doubleTap="onActionDoubleTap"
        @longPress="onActionLongPress"
        variant="flat"
        class="fas"
      />
      <MDButton
        :text="`${iconUnicode('\uf067')} snackbar`"
        @tap="onActionTap"
        @doubleTap="onActionDoubleTap"
        @longPress="onActionLongPress"
        variant="text"
        class="fas"
      />
      <!-- <MDFloatingActionButton rippleColor="blue" src="res://ic_input_add"/> -->
      <MDFloatingActionButton
        rippleColor="blue"
        src="res://fa_plus"
        @tap="onActionTap"
        @doubleTap="onActionDoubleTap"
        @longPress="onActionLongPress"
      />

      <fab
        rippleColor="blue"
        :text="iconUnicode('\uf067')"
        @tap="onActionTap"
        class="fas fab-button"
      ></fab>
      
      <MDSpeedDial :text="iconUnicode('\uf067')" buttonClass="fas" horizontalAlignment="right">
        <MDSpeedDialItem :text="iconUnicode('\uf1eb')" title="test1" buttonClass="fas" @tap="onActionTap" />
        <MDSpeedDialItem :text="iconUnicode('\uf7d9')" title="test2" buttonClass="fas" @tap="onActionTap" />
        <MDSpeedDialItem :text="iconUnicode('\uf027')" title="test3" buttonClass="fas" @tap="onActionTap" />
        <MDSpeedDialItem :text="iconUnicode('\uf492')" title="test4" buttonClass="fas" backgroundColor="orange" @tap="onActionTap" />
      </MDSpeedDial>

    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { EventData } from "@nativescript/core/data/observable";

export default Vue.extend({
  methods: {
    iconUnicode(icon: string): string {
      return `${icon}`;
    },
    onActionTap(evt: EventData) {
      console.log("tap ok");
    },
    onActionDoubleTap(evt: EventData) {
      console.log("double tap ok");
    },
    onActionLongPress(evt: EventData) {
      console.log("long press ok");
    },
  },
});
</script>

<style scoped>
.fab-button {
  height: 70;
  width: 70; 
  margin: 15;
  horizontal-align: right;
  vertical-align: bottom;
}
</style>
```

## 开关

开关组件一般用于输入boolean类型的数据,目前只找到了官方组件[Switch](https://nativescript-vue.org/cn/docs/elements/components/switch/).并没有其他社区实现.

一般用法有两种:

+ 使用v-mode绑定一个变量

    ```Vue
    <Switch v-model="itemEnabled" />
    ```

+ 设置初始值并监听变化:

    ```Vue
    <Switch checked="true" @checkedChange="callback" />
    ```

## 选择器

选择器组件一般用于多选一,比如选择地址一般会用省,市,区三级选择器,目前只找到了官方组件[ListPicker](https://nativescript-vue.org/cn/docs/elements/components/list-picker/),并没有其他社区实现.

一般用法有两种:

+ 给以一个初始的选择列表,使用v-mode绑定一个变量用于获取被选择的值

    ```Vue
    <ListPicker :items="listOfItems" v-model="selectedItem" />
    ```

+ 给以一个初始的选择列表和一个初始的选择,通过监听变化实现功能

    ```Vue
    <ListPicker :items="listOfItems" selectedIndex="0" @selectedIndexChange="callback" />
    ```

## 多选器

官方并没有给出多选器,但社区给了[@nativescript-community/ui-checkbox](https://github.com/nativescript-community/ui-checkbox#nativescript-vue-usage-sample)组件让我们可以用它组合构造多选器,要使用我们需要先安装`@nativescript-community/ui-checkbox`,然后在入口文件处注册:

```ts
import CheckBoxPlugin from '@nativescript-community/ui-checkbox/vue';

Vue.use(CheckBoxPlugin);
```

需要注意这个插件完成度不高,并不支持v-mode方式双向绑定,一个比较通用的写法是用代码手工绑定

> 例子:

```vue
<template>
...
<StackLayout>
  <CheckBox
    text="CheckBox Label"
    :checked="isChecked"
    @checkedChange="isChecked = $event.value"
  ></CheckBox>
  <button text="Toggle it!" @tap="toggleCheck()"></button>
  <button text="Check Property" @tap="getCheckProp()"></button>
</StackLayout>
...
</template>

<script lang="ts">
...

export default Vue.extend({
  data: function () {
    return {
      isChecked: false,
      ...
    };
  },
  methods: {
    toggleCheck() {
      this.isChecked = !this.isChecked
    },
    getCheckProp(){
      console.log(this.isChecked)
    },
    ...
  },
});
</script>
```

我们可以用上面的示例代码很容易的举一反三构造出多选.

## 滑块

滑块官方有提供实现,社区也有实现,不过这个组件用的并不多

+ [Slider](https://nativescript-vue.org/cn/docs/elements/components/slider/),官方的原生组件

    一般用法有两种:

    + 使用v-mode绑定一个变量

        ```Vue
        <Slider v-model="value" />
        ```

    + 设置初始值并监听变化:

        ```Vue
        <Slider value="80" @valueChange="onValueChanged" />
        ```

+ [@nativescript-community/ui-material-slider](https://www.npmjs.com/package/@nativescript-community/ui-material-slider)
    material风格的按钮,是`Button`组件的扩展.要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-slider`,然后在入口文件中导入它

    ```ts
    import SliderPlugin from '@nativescript-community/ui-material-slider/vue';

    Vue.use(SliderPlugin);
    ```

    它的用法和原生的基本相同,只是多出几个属性可以设置样式:

    + `stepSize` 每步的步长,如果不设置则为连续滑块
    + `trackFillColor`跟踪填充色,默认为`colorPrimary`
    + `trackBackgroundColor`跟踪背景色
    + `thumbColor`滑块颜色,默认为`colorPrimary`

    > 例子:

    ```Vue
    <MDSlider v-model="value" minValue="0" maxValue="100"/>
    ```

## 范围选择条

[@nativescript-community/ui-range-seek-bar](https://github.com/nativescript-community/ui-range-seek-bar),社区开源的范围选择条,要使用需要先安装`@nativescript-community/ui-range-seek-bar`,然后在入口文件中导入

```ts
import SekkBarPlugin from '@nativescript-community/ui-range-seek-bar/vue';

Vue.use(SekkBarPlugin);
```

使用时需要区分几个属性

+ `minValue`可选范围的最小值
+ `maxValue`可选范围的最大值
+ `valueMin`选中范围的最小值
+ `valueMax`选中范围的最大值
+ `minRange`最小的范围值

其他属性只和样式有关,可以参考官方文档

> 例子:

```Vue
<template>
...
      <RangeSeekBar
        col="1"
        :minValue="rangeSeekBarProp.minValue"
        :maxValue="rangeSeekBarProp.maxValue"
        :valueMin="rangeSeekBarProp.valueMin"
        :valueMax="rangeSeekBarProp.valueMax"
        :minRange="rangeSeekBarProp.minRange"
        :step="rangeSeekBarProp.step"
        @valueChanged="valueChanged($event)"
        @finalValueChanged="finalValueChanged($event)"
        class="range-seek-bar"
      />

</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { RangeSeekBarEventData } from '@nativescript-community/ui-range-seek-bar';


export default Vue.extend({
  data: function () {
    return {
      ...
      rangeSeekBarProp: {
        minValue: 0,
        maxValue: 100,
        valueMin: 10,
        valueMax: 60,
        minRange: 10,
        step: 2.4,
      },
    };
  },
  methods: {
    valueChanged(event: RangeSeekBarEventData) {
      Object.assign(this.rangeSeekBarProp, event.value);
    },
    finalValueChanged(event: RangeSeekBarEventData) {
      Object.assign(this.rangeSeekBarProp, event.value);
    },
   ...
  },
});
</script>

<style scoped>
...
.range-seek-bar {
    bar-color: #8990c4;
    bar-highlight-color: #2434ad;
    thumb-color: #1a246d;
    bar-height: 10;
    corner-radius: 30;
}

/* MDSpeedDialButton {
  border-radius: 20;
}
MDSpeedDialItemButton {
  border-radius: 15;
} */
</style>

```

## 时间选择器

原生提供了日期选择器[DatePicker](https://nativescript-vue.org/cn/docs/elements/components/date-picker/)和时间选择器[TimePicker](https://nativescript-vue.org/cn/docs/elements/components/time-picker/),它们用法基本一样也是两种

+ 使用v-mode绑定一个变量

    ```Vue
    <DatePicker v-model="selectedDate" />
    <TimePicker v-model="selectedTime" />
    ```

+ 设置初始值并监听变化:

    ```Vue
    <DatePicker :date="someDate" @dateChange="onValueChanged"/>
    <TimePicker :hour="selectedHour" :minute="selectedMinute" @timeChange="onValueChanged"/>
    ```

社区也实现了[@nativescript/datetimepicker](https://github.com/NativeScript/nativescript-datetimepicker),它除了有上面两种选择器外,还额外提供了一个用于选择日期+时间的组件`DateTimePickerFields`,要用它我们需要先安装`@nativescript/datetimepicker`,然后在入口文件中注册

```ts
import DateTimePickerPlugin from "@nativescript/datetimepicker/vue";

Vue.use(DateTimePickerPlugin);
```

>例子:

```Vue
<DateTimePickerFields hintDate="select date" hintTime="select time" @dateChange="selectedDate=$event.value" :date="selectedDate" />
```

## 文本输入框

+ [TextField](https://nativescript-vue.org/cn/docs/elements/components/text-field/)

    原生的文本输入框,基本用法也是两种:

    + 使用v-mode绑定一个变量

        ```Vue
        <TextField v-model="textFieldValue" />
        ```

    + 设置初始值并监听变化:

        ```Vue
        <TextField :text="textFieldValue" hint="Enter text..." @textChange="cb1" @returnPress="cb2"/>
        ```

+ [@nativescript-community/ui-material-textfield](https://www.npmjs.com/package/@nativescript-community/ui-material-textfield)

    material风格的文本输入框,是`TextField`组件的扩展.要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-textfield`,然后在入口文件中导入它

    ```ts
    import TextFieldPlugin from '@nativescript-community/ui-material-textfield/vue';

    Vue.use(TextFieldPlugin);
    ```

    `@nativescript-community/ui-material-textfield`是`TextField`组件的扩展,其用法也是它的超集,增加了`variant`属性用于确定基本样式,支持`underline`(默认),`outline`,`filled`三种.

> 例子:

```vue
<TextField v-model="tfvalue" />
<MDTextField  hint="i am an hint" v-model="tfvalue"/>

```

### 搜索框

搜索框是特化的文本输入框,它固定在顶部,且有一个放大镜图标,当输入结束后提交输入结果发起搜索操作.nativescript自带搜索框组件[SearchBar](https://nativescript-vue.org/cn/docs/elements/components/search-bar/),一般用法如下:

```Vue
<SearchBar hint="Search hint" :text="searchPhrase" @textChange="onTextChanged" @submit="onSubmit" />
```