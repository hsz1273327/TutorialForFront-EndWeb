# 图表

图表可能是我们最关心的组件了,社区提供了一个基本可用的图表组件库[@nativescript-community/ui-chart](https://github.com/nativescript-community/ui-chart).它基于画板因此性能不错.但总的来说样式并不丰富只能算能用.

其接口基本与[MPAndroidChart](https://github.com/PhilJay/MPAndroidChart)一致.

要使用它我们需要先安装`@nativescript-community/ui-chart`,然后在入口文件中注册自己需要的组件.每个组件都可以设置一些基本的属性,比如图例上的样式,是否可以缩放,是否可以拖拽点击等,一些类型的图还会有比如x轴,y轴,网格线等额外的属性可以设置.而图表要渲染的数据则通过若干个设置项来表达,每一个设置项会包括数据以及图例文本,最终调用`.setData(data)`接口后图表就会渲染起来.我们也可以在组件上设置属性`hardwareAccelerated="true"`开启硬件渲染,这可以提高渲染效率

## `ScatterChart`散点图

散点图一般用于展示数据分布.

散点图可以额外设置x轴,y轴,网格等属性.它的每一条要渲染的折线必须是一个`ScatterDataSet`类的实例.而`ScatterDataSet`类的构造函数参数为一个`List[Dict[str,float]]`形式的数组,图例文本,数组中每个元素中x轴的属性名和数组中每个元素中y轴的属性名.我们可以使用方法`.setScatterShape(ScatterShape.X)`设置点的形状,支持的形状包括:

+ `ScatterShape.SQUARE`方块
+ `ScatterShape.CIRCLE`圆点
+ `ScatterShape.TRIANGLE`三角
+ `ScatterShape.CROSS` 十字星
+ `ScatterShape.X`叉
+ `CHEVRON_UP`上v型
+ `ScatterShape.CHEVRON_DOWN`下v型

除了形状,还可以设置颜色进行区分,包括:

+ `.setColor('blue')`设置颜色图标颜色
+ `.setScatterShapeHoleRadius(3)`设置图标(方块,圆点,三角)有中心孔,参数为孔直径
+ `.setScatterShapeHoleColor('green')`设置有中心孔的图标中心孔的颜色

在要渲染的`ScatterDataSet`类的实例都构造好后需要用一个`ScatterData`类的实例将他们都打包起来,最后调动`.setData(data)`接口实现渲染.

### 注册组件

```Vue
import { ScatterChart } from "@nativescript-community/ui-chart/charts"

Vue.registerElement('ScatterChart', ()=>ScatterChart);
```

### 使用

散点图中每条数据的形式满足`Array<Point>`,其中`Point`满足接口

```ts
interface Point {
  x?: number,
  icon?: ImageSource,
  y: number
}
```

当不设置`x`时x会取值为数据在列表中的位置.当我们需要渲染自己的图形时可以填上`icon`字段.

> 例子:

```vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <ScatterChart ref="chart" @loaded="onChartLoaded" />
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";

import { ScatterChart, ScatterShape } from '@nativescript-community/ui-chart/charts/ScatterChart';
import { ScatterData } from '@nativescript-community/ui-chart/data/ScatterData';
import { ScatterDataSet } from '@nativescript-community/ui-chart/data/ScatterDataSet';
import { XAxisPosition } from "@nativescript-community/ui-chart/components/XAxis";
import { LegendForm, Legend, LegendOrientation, LegendVerticalAlignment, LegendHorizontalAlignment } from '@nativescript-community/ui-chart/components/Legend';
export default Vue.extend({
  methods: {
    onChartLoaded() {
      const eleview = this.$refs.chart as Vue;
      const chart = eleview.nativeView as ScatterChart;
      // //显示fps
      // chart.drawFrameRate = true;

      chart.setDrawGridBackground(false);
      chart.setTouchEnabled(true);
      chart.setMaxHighlightDistance(50);
      chart.setDragEnabled(true);
      chart.setScaleEnabled(true);
      chart.setMaxVisibleValueCount(200);
      chart.setPinchZoom(true);
      // 设置图例
      const l = chart.getLegend();
      l.setEnabled(true);
      l.setVerticalAlignment(LegendVerticalAlignment.TOP);
      l.setHorizontalAlignment(LegendHorizontalAlignment.RIGHT);
      l.setOrientation(LegendOrientation.VERTICAL);
      l.setDrawInside(false);
      l.setXOffset(5);
      const yl = chart.getAxisLeft();
      yl.setAxisMinimum(0); // this replaces setStartAtZero(true)
      chart.getAxisRight().setEnabled(false);
      const xl = chart.getXAxis();
      //// 设置x轴的粗度
      xl.setAxisLineWidth(3);
      //// 设置x轴所在的位置,默认在顶部
      xl.setPosition(XAxisPosition.BOTTOM);
      //// 设置隐藏y轴的网格
      xl.setDrawGridLines(false);

      // 设置待渲染的设置对象,构造函数参数为待渲染的数据, 图例标签,待渲染数据中代表x轴的属性名,待渲染数据中代表y轴的属性名

      const values1 = [];
      const values2 = [];
      const values3 = [];
      const range = 100;
      for (let i = 0; i < 20; i++) {
          values1.push({ y: Math.random() * range + 3, x: Math.random() * 5});
          values2.push({ y: Math.random() * range + 3 + 0.33 , x: Math.random() * 5});
          values3.push({ y: Math.random() * range + 3 + 0.66 , x: Math.random() * 5});
      }
      console.log(values1)
      // create a dataset and give it a type
      const set1 = new ScatterDataSet(values1, 'DS 1',"x","y");
      set1.setForm(LegendForm.SQUARE);
      set1.setScatterShape(ScatterShape.SQUARE);
      set1.setColor('red');
      const set2 = new ScatterDataSet(values2, 'DS 2',"x","y");
      set2.setForm(LegendForm.SQUARE);
      set2.setScatterShape(ScatterShape.CIRCLE);
      set2.setScatterShapeHoleColor('green');
      set2.setScatterShapeHoleRadius(3);
      set2.setColor('blue');
      const set3 = new ScatterDataSet(values3, 'DS 3',"x","y");
      set3.setForm(LegendForm.SQUARE);
      set3.setScatterShape(ScatterShape.X);
      set3.setColor('green');
      set1.setScatterShapeSize(8);
      set2.setScatterShapeSize(8);
      set3.setScatterShapeSize(8);
      // create a data object with the data sets
      const data = new ScatterData([set1, set2, set3]);
      // data.setValueTypeface(tfLight);
      
      chart.setData(data);
      chart.invalidate();
    },
  },
});
</script>
```

## `BubbleChart`气泡图

气泡图可以认为是散点图的扩展,除了可以展示三个变量之间的关系及数据分布情况

它与散点图最大的区别就是数据要增加`size`值,这个`size`用于控制点的大小.与散点图不同,它不能设置形状只能设置颜色,形状人如果不设置`icon`则默认为圆形点.

默认情况下size的值会被打印在图上,我们可以使用如下设置去掉size的值.

```ts
data.setDrawValues(false);
data.setValueTextSize(8);
data.setValueTextColor('white');
data.setHighlightCircleWidth(1.5);
```

### 注册组件

```Vue
import { ScatterChart } from "@nativescript-community/ui-chart/charts"

Vue.registerElement('ScatterChart', ()=>ScatterChart);
```

### 使用

散点图中每条数据的形式满足`Array<Point>`,其中`Point`满足接口

```ts
interface Point {
  x?: number,
  icon?: ImageSource,
  y: number,
  size: number,
}
```

当不设置`x`时x会取值为数据在列表中的位置.当我们需要渲染自己的图形时可以填上`icon`字段.

> 例子:

```vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <BubbleChart ref="chart" @loaded="onChartLoaded" />
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";

import { BubbleChart } from '@nativescript-community/ui-chart/charts/BubbleChart';
import { BubbleData } from '@nativescript-community/ui-chart/data/BubbleData';
import { BubbleDataSet } from '@nativescript-community/ui-chart/data/BubbleDataSet';
import { XAxisPosition } from "@nativescript-community/ui-chart/components/XAxis";
import { LegendForm, LegendOrientation, LegendVerticalAlignment, LegendHorizontalAlignment } from '@nativescript-community/ui-chart/components/Legend';
export default Vue.extend({
  methods: {
    onChartLoaded() {
      const eleview = this.$refs.chart as Vue;
      const chart = eleview.nativeView as BubbleChart;

      chart.setDrawGridBackground(false);
      chart.setTouchEnabled(true);
      // enable scaling and dragging
      chart.setDragEnabled(true);
      chart.setScaleEnabled(true);
      chart.setMaxVisibleValueCount(200);
      chart.setPinchZoom(true);
      const l = chart.getLegend();
      l.setEnabled(true)
      l.setVerticalAlignment(LegendVerticalAlignment.TOP);
      l.setHorizontalAlignment(LegendHorizontalAlignment.RIGHT);
      l.setOrientation(LegendOrientation.VERTICAL);
      l.setDrawInside(false);
      const yl = chart.getAxisLeft();
      yl.setSpaceTop(30);
      yl.setSpaceBottom(30);
      yl.setDrawZeroLine(false);
      chart.getAxisRight().setEnabled(false);
      const xl = chart.getXAxis();
      xl.setPosition(XAxisPosition.BOTTOM);

      // 设置待渲染的设置对象,构造函数参数为待渲染的数据, 图例标签,待渲染数据中代表x轴的属性名,待渲染数据中代表y轴的属性名

      const values1 = [];
      const values2 = [];
      const values3 = [];
      for (let i = 0; i < 20; i++) {
          values1.push({
              y: Math.random() * 100,
              x: Math.random() * 10,
              size: Math.random() * 100,
          });
          values2.push({
              y: Math.random() * 100,
              x: Math.random() * 10,
              size: Math.random() * 100,
          });
          values3.push({
              y: Math.random() * 100,
              x: Math.random() * 10,
              size: Math.random() * 100
          });
      }
      // create a dataset and give it a type
      const set1 = new BubbleDataSet(values1, 'DS 1');
      set1.setForm(LegendForm.SQUARE);
      set1.setDrawValues(true);
      set1.setColor('red');
      const set2 = new BubbleDataSet(values2, 'DS 2');
      set2.setForm(LegendForm.SQUARE);
      set2.setDrawValues(true);
      set2.setColor('green');
      const set3 = new BubbleDataSet(values3, 'DS 3');
      set3.setForm(LegendForm.SQUARE);
      set3.setDrawValues(true);
      set3.setColor('blue');
      // create a data object with the data sets
      const data = new BubbleData([set1, set2, set3]);
      data.setDrawValues(false);
      data.setValueTextSize(8);
      data.setValueTextColor('white');
      data.setHighlightCircleWidth(1.5);
      chart.setData(data);
      chart.invalidate();
    },
  },
});
</script>
```

## `LineChart`折线图

折线图一般用于展示数据取值的连续变化,比如用于展示数值随时间的变化情况.

折线图可以额外设置x轴,y轴,网格,填充区等属性,同时还可以设置`LimitLine`标明极值.它的每一条要渲染的折线必须是一个`LineDataSet`类的实例.而`LineDataSet`类的构造函数参数为一个`List[Dict[str,float]]`形式的数组,图例文本,数组中每个元素中x轴的属性名和数组中每个元素中y轴的属性名.在要渲染的`LineDataSet`类的实例都构造好后需要用一个`LineData`类的实例将他们都打包起来,最后调动`.setData(data)`接口实现渲染.

### 注册组件

```Vue
import { LineChart } from "@nativescript-community/ui-chart/charts"

Vue.registerElement('LineChart', () => LineChart);
```

### 使用

折线图中每条数据的形式满足`Array<Point>`,其中`Point`满足接口

```ts
interface Point {
  x?: number,
  y: number
}
```

如果不设置x则x的取值为在列表中的位置

> 例子:

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <LineChart
        ref="chart"
        width="300"
        height="400"
        @loaded="onChartLoaded"
        hardwareAccelerated="true"
      >
      </LineChart>
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { LineChart } from "@nativescript-community/ui-chart/charts/LineChart";
import { LineDataSet } from "@nativescript-community/ui-chart/data/LineDataSet";
import { LineData } from "@nativescript-community/ui-chart/data/LineData";
import { LegendForm } from "@nativescript-community/ui-chart/components/Legend";
import { XAxisPosition } from "@nativescript-community/ui-chart/components/XAxis"
import { LimitLine, LimitLabelPosition } from '@nativescript-community/ui-chart/components/LimitLine';
import { DashPathEffect } from "@nativescript-community/ui-canvas";
import { Font } from '@nativescript/core';
import { FontStyle, FontWeight } from '@nativescript/core/ui/styling/font';
export default Vue.extend({
  methods: {
    onChartLoaded() {
      const eleview = this.$refs.chart as Vue;
      const chart = eleview.nativeView as LineChart;

      // 设置图表的背景色
      chart.backgroundColor = "white";

      // 设置为非只读可操作
      chart.setTouchEnabled(true);
      // 设置不画出网格
      chart.setDrawGridBackground(false);

      // 设置为可拖拽
      chart.setDragEnabled(true);
      // 设置为可伸缩
      chart.setScaleEnabled(true);

      // 设置强制捏合手势用于聚焦
      chart.setPinchZoom(true);

      //设置启用每次点击突出显示
      chart.setHighlightPerTapEnabled(true);
      //设置启用每次拖拽突出显示
      chart.setHighlightPerDragEnabled(true);

  
      // 设置图例标签
      const legend = chart.getLegend();
      /// 启用图例
      legend.setEnabled(true);
      /// 设置图例上的字体
      legend.setFont(new Font("serif", 10, FontStyle.ITALIC, FontWeight.EXTRA_LIGHT));
            
      // 设置坐标轴
      /// 设置x轴
      const xAxis = chart.getXAxis();
      //// 设置x轴的粗度
      xAxis.setAxisLineWidth(3);
      //// 设置x轴所在的位置,默认在顶部
      xAxis.setPosition(XAxisPosition.BOTTOM)
      //// 设置隐藏y轴的网格
      xAxis.setDrawGridLines(false)
      //设置x轴为红色
      // xAxis.setAxisLineColor('red');
      //// x轴网格使用虚线
      // xAxis.enableGridDashedLine(10, 10, 0);
      //// 设置x轴的label展示的字符串
      xAxis.setValueFormatter({
        getAxisLabel(value: number): string {
          let v: string | number = value;
          if (value == 0) {
            v = "日";
          }
          return `周${v}`;
        },
      });
            
      /// 设置y轴
      const yAxis = chart.getAxisLeft();
      //// 设置y轴宽度
      yAxis.setAxisLineWidth(3);
      //// 设置y轴的取值范围
      yAxis.setAxisMaximum(100);
      yAxis.setAxisMinimum(0);
      //// 设置y轴颜色
      // yAxis.setAxisLineColor('blue');
      //// y轴使用虚线
      // yAxis.enableGridDashedLine(10, 30, 0);
      //// 设置隐藏x轴的网格
      // yAxis.setDrawGridLines(false)
      
      /// 设置右轴
      const rightAxis = chart.getAxisRight();
      rightAxis.setEnabled(false);
      // //// 启用右轴
      // rightAxis.setEnabled(true);
      // //// 设置右轴颜色
      // rightAxis.setAxisLineColor('red');
      // //// 设置右轴宽度
      // rightAxis.setAxisLineWidth(2);
      // //// 设置右轴是否画网格线
      // rightAxis.setDrawGridLines(false)

      /// 设置极值线
      const ll1 = new LimitLine(90, 'Upper Limit');
      ll1.setLineWidth(4);
      ll1.enableDashedLine(10, 10, 0);
      ll1.setLabelPosition(LimitLabelPosition.RIGHT_TOP);
      ll1.setTextSize(10);
      const ll2 = new LimitLine(10, 'Lower Limit');
      ll2.setLineWidth(4);
      ll2.enableDashedLine(10, 10, 0);
      ll2.setLabelPosition(LimitLabelPosition.RIGHT_BOTTOM);
      ll2.setTextSize(10);

      // 在数据后面而不是在上面画限制线
      yAxis.setDrawLimitLinesBehindData(true);
      xAxis.setDrawLimitLinesBehindData(true);
      // 添加极值线
      yAxis.addLimitLine(ll1);
      yAxis.addLimitLine(ll2);
      //xAxis.addLimitLine(llXAxis);

      
      // 构造要渲染的数据,index为横轴,value为纵轴
      const myData = new Array(7).fill(0).map((v, i) => ({
          x: i,
          y: Math.random() * 100,
        }));

      // 设置待渲染的设置对象,构造函数参数为待渲染的数据, 图例标签,待渲染数据中代表x轴的属性名,待渲染数据中代表y轴的属性名
      const sets = [];
      const set = new LineDataSet(myData, "test line", "x", "y");
      /// 设置线条颜色
      set.setColor("blue");
      /// 设置是否开启y轴图标
      set.setDrawIcons(false);
      /// 设置使用虚线,参数为线条长度,空白长度,阶段
      // set.enableDashedLine(10, 5, 0);
      /// 设置点颜色
      set.setCircleColor("black");
      /// 设置线条宽度
      set.setLineWidth(1);
      /// 设置点的直径
      set.setCircleRadius(3);
      /// 设置点为实心点
      set.setDrawCircleHole(false);
      /// 自定义图例
      //// 设置图标样式
      set.setForm(LegendForm.LINE);
      set.setFormLineWidth(1);
      set.setFormLineDashEffect(new DashPathEffect([10, 5], 0));
      set.setFormSize(15);
      //设置值的文本字体大小
      set.setValueTextSize(9);
      // 将选择线画为虚线
      set.enableDashedHighlightLine(10, 5, 0);
      // 设置填充区
      set.setDrawFilled(true);
      set.setFillFormatter({
        getFillLinePosition(dataSet: any, dataProvider: any) {
          return chart.getAxisLeft().getAxisMinimum();
        },
      });
      // 设置填充区颜色set color of filled area
      set.setFillColor("red");

      sets.push(set);
      const ld = new LineData(sets);

      //将数据设置进组件中渲染
      chart.setData(ld);
    },
  },
});
</script>
```

## `BarChart`柱状图

柱状图可以理解为折线图的扩展,但一般用于观察数据的离散变化,比如展示几个竞品在不同地区的销售数据.

和折线图同样可以设置x轴,y轴,网格,`LimitLine`极值,但不能设置填充区.而比起折线图来由于需要区分不同的实体,一般我们会将图例样式设置为`LegendForm.SQUARE`用`set.setStackLabels(["a", "b", "c", "d", "e", "f", "g"]);`而不是`xAxis.setValueFormatter()`填充x轴上的文本,并用`bd.setBarWidth()`设置柱宽,用`bd.groupBars(0, 0.3, 0.1)`将不同实体的柱分开展示

### 注册组件

```Vue
import { BarChart } from "@nativescript-community/ui-chart/charts"

Vue.registerElement('BarChart', ()=>BarChart);
```

### 使用

柱状图中每条数据的形式满足`Array<Point>`,其中`Point`满足接口

```ts
interface Point {
  x?: number,
  y: number
}
```

如果不设置x则x的取值为在列表中的位置

> 例子:

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <BarChart
        ref="chart"
        width="300"
        height="400"
        @loaded="onChartLoaded"
        hardwareAccelerated="true"
      >
      </BarChart>
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { BarChart } from "@nativescript-community/ui-chart/charts/BarChart";
import { BarData } from "@nativescript-community/ui-chart/data/BarData";
import { BarDataSet } from "@nativescript-community/ui-chart/data/BarDataSet";
import { LegendForm } from "@nativescript-community/ui-chart/components/Legend";
import { XAxisPosition } from "@nativescript-community/ui-chart/components/XAxis";
import {
  LimitLine,
  LimitLabelPosition,
} from "@nativescript-community/ui-chart/components/LimitLine";
import { DashPathEffect } from "@nativescript-community/ui-canvas";
import { Font } from "@nativescript/core";
import { FontStyle, FontWeight } from "@nativescript/core/ui/styling/font";
export default Vue.extend({
  methods: {
    onChartLoaded() {
      const eleview = this.$refs.chart as Vue;
      const chart = eleview.nativeView as BarChart;

      // 设置图表的背景色
      chart.backgroundColor = "white";

      // 设置为非只读可操作
      chart.setTouchEnabled(true);
      // 设置不画出网格
      chart.setDrawGridBackground(false);

      // 设置为可拖拽
      chart.setDragEnabled(true);
      // 设置为可伸缩
      chart.setScaleEnabled(true);

      // 设置强制捏合手势用于聚焦
      chart.setPinchZoom(true);

      //设置启用每次点击突出显示
      chart.setHighlightPerTapEnabled(true);
      //设置启用每次拖拽突出显示
      chart.setHighlightPerDragEnabled(true);

      // 设置图例标签
      const legend = chart.getLegend();
      /// 启用图例
      legend.setEnabled(true);
      /// 设置图例上的字体
      legend.setFont(
        new Font("serif", 10, FontStyle.ITALIC, FontWeight.EXTRA_LIGHT)
      );

      // 设置坐标轴
      /// 设置x轴
      const xAxis = chart.getXAxis();
      //// 设置x轴的粗度
      xAxis.setAxisLineWidth(3);
      //// 设置x轴所在的位置,默认在顶部
      xAxis.setPosition(XAxisPosition.BOTTOM);
      //// 设置隐藏y轴的网格
      xAxis.setDrawGridLines(false);
      // xAxis.setValueFormatter({
      //   getAxisLabel(value: number): string {
      //     let v: string | number = value;
      //     if (value == 0) {
      //       v = "日";
      //     }
      //     return `周${v}`;
      //   },
      // });
      //设置x轴为红色
      // xAxis.setAxisLineColor('red');
      //// x轴网格使用虚线
      // xAxis.enableGridDashedLine(10, 10, 0);

      /// 设置y轴
      const yAxis = chart.getAxisLeft();
      //// 设置y轴宽度
      yAxis.setAxisLineWidth(3);
      //// 设置y轴的取值范围
      yAxis.setAxisMaximum(100);
      yAxis.setAxisMinimum(0);
      //// 设置y轴颜色
      // yAxis.setAxisLineColor('blue');
      //// y轴使用虚线
      // yAxis.enableGridDashedLine(10, 30, 0);
      //// 设置隐藏x轴的网格
      yAxis.setDrawGridLines(false)

      /// 设置右轴
      const rightAxis = chart.getAxisRight();
      rightAxis.setEnabled(false);
      // //// 启用右轴
      // rightAxis.setEnabled(true);
      // //// 设置右轴颜色
      // rightAxis.setAxisLineColor('red');
      // //// 设置右轴宽度
      // rightAxis.setAxisLineWidth(2);
      // //// 设置右轴是否画网格线
      // rightAxis.setDrawGridLines(false)

  
      //xAxis.addLimitLine(llXAxis);

      // 设置待渲染的设置对象,构造函数参数为待渲染的数据, 图例标签,待渲染数据中代表x轴的属性名,待渲染数据中代表y轴的属性名
      const sets = [];

      for (let x of ["red", "yellow", "blue"]) {
        // 构造要渲染的数据,index为横轴,value为纵轴
        const myData = new Array(7).fill(0).map((v, i) => ({
          x: i,
          y: Math.random() * 100,
        }));
        const set = new BarDataSet(myData, `test bar ${x}`, "x", "y");
        /// 设置线条颜色
        set.setColor(x);
        /// 设置是否开启y轴图标
        set.setDrawIcons(false);
        /// 设置使用虚线,参数为线条长度,空白长度,阶段

        /// 自定义图例
        //// 设置图标样式
        set.setForm(LegendForm.SQUARE);
        // set.setFormLineWidth(1);
        // set.setFormLineDashEffect(new DashPathEffect([10, 5], 0));
        // set.setFormSize(15);
        //设置值的文本字体大小
        set.setValueTextSize(9);
        set.setStackLabels(["a", "b", "c", "d", "e", "f", "g"]);
        // 将选择线画为虚线
        // set.enableDashedHighlightLine(10, 5, 0);

        sets.push(set);
      }

      const bd = new BarData(sets);
      bd.setBarWidth(0.1)
      bd.groupBars(0, 0.3, 0.1);
      //将数据设置进组件中渲染
      chart.setData(bd);
    },
  },
});
</script>
```

## `HorizontalBarChart`水平柱状图

水平柱状图和柱状图一样适用于展示离散变化.只是转了个90度方便做成长条利于观察而已.

### 注册组件

```Vue
import { BarChart } from "@nativescript-community/ui-chart/charts"

Vue.registerElement('BarChart', ()=>BarChart);
```

### 使用

柱状图中每条数据的形式满足`Array<Point>`,其中`Point`满足接口

```ts
interface Point {
  x?: number,
  y: number
}
```

如果不设置x则x的取值为在列表中的位置

> 例子:

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <BarChart
        ref="chart"
        width="300"
        height="400"
        @loaded="onChartLoaded"
        hardwareAccelerated="true"
      >
      </BarChart>
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { BarChart } from "@nativescript-community/ui-chart/charts/BarChart";
import { BarData } from "@nativescript-community/ui-chart/data/BarData";
import { BarDataSet } from "@nativescript-community/ui-chart/data/BarDataSet";
import { LegendForm } from "@nativescript-community/ui-chart/components/Legend";
import { XAxisPosition } from "@nativescript-community/ui-chart/components/XAxis";
import {
  LimitLine,
  LimitLabelPosition,
} from "@nativescript-community/ui-chart/components/LimitLine";
import { DashPathEffect } from "@nativescript-community/ui-canvas";
import { Font } from "@nativescript/core";
import { FontStyle, FontWeight } from "@nativescript/core/ui/styling/font";
export default Vue.extend({
  methods: {
    onChartLoaded() {
      const eleview = this.$refs.chart as Vue;
      const chart = eleview.nativeView as BarChart;

      // 设置图表的背景色
      chart.backgroundColor = "white";

      // 设置为非只读可操作
      chart.setTouchEnabled(true);
      // 设置不画出网格
      chart.setDrawGridBackground(false);

      // 设置为可拖拽
      chart.setDragEnabled(true);
      // 设置为可伸缩
      chart.setScaleEnabled(true);

      // 设置强制捏合手势用于聚焦
      chart.setPinchZoom(true);

      //设置启用每次点击突出显示
      chart.setHighlightPerTapEnabled(true);
      //设置启用每次拖拽突出显示
      chart.setHighlightPerDragEnabled(true);

      // 设置图例标签
      const legend = chart.getLegend();
      /// 启用图例
      legend.setEnabled(true);
      /// 设置图例上的字体
      legend.setFont(
        new Font("serif", 10, FontStyle.ITALIC, FontWeight.EXTRA_LIGHT)
      );

      // 设置坐标轴
      /// 设置x轴
      const xAxis = chart.getXAxis();
      //// 设置x轴的粗度
      xAxis.setAxisLineWidth(3);
      //// 设置x轴所在的位置,默认在顶部
      xAxis.setPosition(XAxisPosition.BOTTOM);
      //// 设置隐藏y轴的网格
      xAxis.setDrawGridLines(false);
      // xAxis.setValueFormatter({
      //   getAxisLabel(value: number): string {
      //     let v: string | number = value;
      //     if (value == 0) {
      //       v = "日";
      //     }
      //     return `周${v}`;
      //   },
      // });
      //设置x轴为红色
      // xAxis.setAxisLineColor('red');
      //// x轴网格使用虚线
      // xAxis.enableGridDashedLine(10, 10, 0);

      /// 设置y轴
      const yAxis = chart.getAxisLeft();
      //// 设置y轴宽度
      yAxis.setAxisLineWidth(3);
      //// 设置y轴的取值范围
      yAxis.setAxisMaximum(100);
      yAxis.setAxisMinimum(0);
      //// 设置y轴颜色
      // yAxis.setAxisLineColor('blue');
      //// y轴使用虚线
      // yAxis.enableGridDashedLine(10, 30, 0);
      //// 设置隐藏x轴的网格
      yAxis.setDrawGridLines(false)

      /// 设置右轴
      const rightAxis = chart.getAxisRight();
      rightAxis.setEnabled(false);
      // //// 启用右轴
      // rightAxis.setEnabled(true);
      // //// 设置右轴颜色
      // rightAxis.setAxisLineColor('red');
      // //// 设置右轴宽度
      // rightAxis.setAxisLineWidth(2);
      // //// 设置右轴是否画网格线
      // rightAxis.setDrawGridLines(false)

  
      //xAxis.addLimitLine(llXAxis);

      // 设置待渲染的设置对象,构造函数参数为待渲染的数据, 图例标签,待渲染数据中代表x轴的属性名,待渲染数据中代表y轴的属性名
      const sets = [];

      for (let x of ["red", "yellow", "blue"]) {
        // 构造要渲染的数据,index为横轴,value为纵轴
        const myData = new Array(7).fill(0).map((v, i) => ({
          x: i,
          y: Math.random() * 100,
        }));
        const set = new BarDataSet(myData, `test bar ${x}`, "x", "y");
        /// 设置线条颜色
        set.setColor(x);
        /// 设置是否开启y轴图标
        set.setDrawIcons(false);
        /// 设置使用虚线,参数为线条长度,空白长度,阶段

        /// 自定义图例
        //// 设置图标样式
        set.setForm(LegendForm.SQUARE);
        // set.setFormLineWidth(1);
        // set.setFormLineDashEffect(new DashPathEffect([10, 5], 0));
        // set.setFormSize(15);
        //设置值的文本字体大小
        set.setValueTextSize(9);
        set.setStackLabels(["a", "b", "c", "d", "e", "f", "g"]);
        // 将选择线画为虚线
        // set.enableDashedHighlightLine(10, 5, 0);

        sets.push(set);
      }

      const bd = new BarData(sets);
      bd.setBarWidth(0.1)
      bd.groupBars(0, 0.3, 0.1);
      //将数据设置进组件中渲染
      chart.setData(bd);
    },
  },
});
</script>
```



## `CandleStickChart`蜡烛图

蜡烛图一般也就是k线图,用于展示开始值,结束值,最高值,最低值这4个数据的连续变化情况

## `PieChart`饼图

一般用于展示统计数据占比

## `RadarChart`雷达图

雷达图一般用于展示一组数据中各个变量的权重高低情况,非常适用于展示性能数据.


## 多图组合


## 动态刷新数据