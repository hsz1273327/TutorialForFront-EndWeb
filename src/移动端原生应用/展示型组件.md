# 展示型组件

展示型组件就是指那种纯用于展示的组件,大致可以分为

1. 基本展示组件,页面上单纯用于展示的组件元素
2. 组合展示组件,页面上基本展示组件和一些对应操作的组合.一些也兼具排版功能

## 基本展示组件

### 标签

标签用于展示只读文本.

+ [Label](https://nativescript-vue.org/cn/docs/elements/components/label/)
    原生的标签组件.用法有两种:

    + 简单用法:

        ```vue
        <Label text="Label" />
        ```

    + 带样式的标签用法:

        ```Vue
        <Label textWrap="true">
            <FormattedString>
                <Span text="This text has a " />
                <Span text="red " style="color: red" />
                <Span text="piece of text. " />
                <Span text="Also, this bit is italic, " fontStyle="italic" />
                <Span text="and this bit is bold." fontWeight="bold" />
            </FormattedString>
        </Label>
        ```

+ [@nativescript-community/ui-label](https://github.com/nativescript-community/ui-label)

    社区提供的label组件,特点是可以使用html的子集来方便的构造标签,要使用它需要先按如下步骤设置:

    1. 安装`@nativescript-community/ui-label`
    2. [ios]`App_Resources/ios`中修改`Podfile`,其中添加`pod 'DTCoreText'`
    3. [ios]入口文件中添加

        ```vue
        import { enableIOSDTCoreText } from '@nativescript-community/ui-label';

        if (isIOS) {
            enableIOSDTCoreText();
        }

        ```

    4. 入口文件中添加

        ```vue
        import { Label as HTMLLabel } from '@nativescript-community/ui-label';

        Vue.registerElement('HTMLLabel', () => HTMLLabel);
        ```

    用的时候也很简单,标签为`HTMLLabel`,基本只要将文本填入属性`html`即可.除此之外还可以设置属性`linkColor`,`linkUnderline`,`linkTap`来设置`html`属性中填的`<a>`标签的行为

+ [@nativescript-community/ui-canvaslabel](https://github.com/nativescript-community/ui-canvaslabel)
    社区提供的label组件,特点是使用canvas渲染,性能更好,要使用它需要先安装`@nativescript-community/ui-canvaslabel`,然后在入口文件中注册:

    ```Vue
    import CanvasLabel from '@nativescript-community/ui-canvaslabel/vue';
    Vue.use(CanvasLabel);
    ```

>例子:

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <Label text="Label" />
      <Label textWrap="true">
        <FormattedString>
          <Span text="This text has a " />
          <Span text="red " style="color: red" />
          <Span text="piece of text. " />
          <Span text="Also, this bit is italic, " fontStyle="italic" />
          <Span text="and this bit is bold." fontWeight="bold" />
        </FormattedString>
      </Label>
      <HTMLLabel
        fontSize="50"
        fontFamily="Cabin Sketch,res/cabinsketch"
        width="100%"
        paddingTop="5"
        color="#336699"
        textWrap="true"
        :html="someBindedValue"
        verticalAlignment="top"
      />

      <!-- Clickable Link Usage -->
      <HTMLLabel
        html="<a href='https://youtube.com'>Open Youtube.com</a>"
        linkColor="pink"
        linkUnderline="false"
        @linkTap="onLinkTap($event)"
        fontFamily="OpenSans"
        fontSize="16"
        margin="2 5 5 5"
        textWrap="true"
      ></HTMLLabel>

      <CanvasLabel id="canvaslabel" fontSize="10" color="white" backgroundColor="darkgray">
        <CGroup fontSize="18" verticalAlignment="middle" paddingLeft="20">
            <CSpan :text="line('canvaslabel')" fontWeight="bold" />
            <CSpan :text="line('next line')" color="#ccc" fontSize="16" />
        </CGroup>
        <CSpan text="end" color="lightgray" fontSize="14" textAlignment="right" paddingRight="20" paddingTop="4" />
    </CanvasLabel>
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { EventData } from "@nativescript/core/data/observable";

export default Vue.extend({
  data: function () {
    return {
      someBindedValue:
        "<p>This is really powerful. <b>Amazing to be quite honest</b></p>",
    };
  },
  methods: {
    // event binded to the linkTap on the HTMLLabel
    onLinkTap(evt: EventData) {
      console.log("Linktap ok");
    },
    iconUnicode(icon: string): string {
      return `${icon}`;
    },
    line(row:string): string {
      return `${row}\n`
    }
  },
});
</script>
```

### 文本组件

文本组件目前只有有官方组件[TextView](https://nativescript-vue.org/cn/docs/elements/components/text-view/).
它用于显示可编辑或只读的多行文本.一般用它来让用户在你的应用中键入大文本或在屏幕上显示更长的多行文字.因此文本组件既是一个展示型组件也是一个输入型组件.

它的用法和`Label`也很类似

+ 简单的显示长文本

```Vue
<TextView text="Multi\nLine\nText" />
```

+ 显示复杂样式的长文本

```vue
<TextView editable="false">
  <FormattedString>
    <Span text="You can use text attributes such as " />
    <Span text="bold, " fontWeight="Bold" />
    <Span text="italic " fontStyle="Italic" />
    <Span text="and " />
    <Span text="underline." textDecoration="Underline" />
  </FormattedString>
</TextView>
```

+ 可编辑的长文本

    ```Vue
    <TextView v-model="textViewValue" />
    ```

    我们也可以监听事件`textChange`和`returnPress`来及时的处理内部文字.

## 组合展示组件

### 卡片

卡片是一组相关信息和行为的组合,其节本定义可以看[material上的定义](https://material.io/components/cards#anatomy),通常会也不会单独展示,而是以列表的形式出现多个卡片,卡片的信息和交互集中,常常会在内容平台上看到,比如B站的推荐瀑布流中每一条视频都是一个卡片.

一个卡片一般最多可以分为如下几个部分

1. 标题部分,一般是一个容器,里面会有图标,标题文本,副标题,一些强调社交属性的应用也会弄个按钮呼出底部弹出导航用于方便的进行与作者发布者相关的社交行为操作
2. [option]多媒体部分,一般是张图片,也就是封面图
3. [option]简介部分
4. [option]操作部分,一般是个容器,里面排布有按钮,通常是转发,收藏这类针对内容的操作.

卡片组件只有社区实现的[@nativescript-community/ui-material-cardview](https://www.npmjs.com/package/@nativescript-community/ui-material-cardview).
要用它我们当然需要先设置Material.然后安装`@nativescript-community/ui-material-cardview`,然后在入口文件中导入它

```ts
import CardViewPlugin from '@nativescript-community/ui-material-cardview/vue';

Vue.use(CardViewPlugin);
```

它本质上就是一个`StackLayout`的扩展,只是可以设置`elevation`,`dynamicElevationOffset`,`rippleColor`,`shape`这几个css样式属性而已.

卡片这种我们一般也是将它写成一个组件,然后传入数据套用样式会比较多

>例子:

+ 创建一个定义的卡片组件`SimpleCard.vue`

    ```vue
    <template>
      <MDCardView
        margin="10"
        width="200"
        height="200"
        rippleColor="blue"
        elevation="6"
      >
        <GridLayout rows="40,*,auto,30">
          <!--title部分-->
          <StackLayout orientation="horizontal" row="0">
            <GridLayout columns="40,*">
              <NSImg
                :src="iconImgURL"
                stretch="fitCenter"
                roundAsCircle="true"
                col="0"
              />
              <Label :text="title" class="title"  col="1"></Label>
            </GridLayout>
          </StackLayout>
          <!--多媒体部分 -->
          <NSImg :src="mediaImgURL"  row="1" />
          <!--文本部分 -->
          <Label :text="description" row="2" />
          <!--按钮部分 -->
          <StackLayout orientation="horizontal" row="3">
            <Button text="b1" />
            <Button text="b2" />
          </StackLayout>
        </GridLayout>
      </MDCardView>
    </template>
      
    <script lang="ts">
    import Vue from "nativescript-vue";

    export default Vue.extend({
      props: {
        title: String,
        iconImgURL: String,
        mediaImgURL: String,
        description: String,
      }
    });
    </script>
    ```

    可以看出单纯的`MDCardView`只是给了一个框,我们还是需要单独对其中的内容进行排版,设置行为回调等细化处理.

+ 使用`SimpleCard`

    ```vue
    <template>
      <Page actionBarHidden="true">
        <GridLayout rows="*,auto">
          <SimpleCard v-bind="simplecardprops" />
          <Button row="1" text="outside" />
        </GridLayout>
      </Page>
    </template>
    <script lang="ts">
    import Vue from "vue";

    import SimpleCard from "../components/SimpleCard.vue"

    export default Vue.extend({
      components:{
        SimpleCard
      },
      data:function(){
        return {
          simplecardprops:{
            title: "test1",
            iconImgURL: "~/imgs/锦叶绿萝.png",
            mediaImgURL: "~/imgs/锦叶绿萝.png",
            description: "this is test's description"
          }
        }
      }
    });
    </script>
    ```

### 元素列表

要展示一系列同一类型的物品信息最常见的用法就是使用列表,nativescript官方提供了最基础的列表组件[ListView](https://nativescript-vue.org/cn/docs/elements/components/list-view/).

其基本用法如下:

```vue
<ListView for="item in listOfItems">
  <v-template>
    <Label :text="item.text" /> 
  </v-template>

  <v-template if="$odd">
    <!-- For items with an odd index, shows the label in red. -->
    <Label :text="item.text" color="red" />
  </v-template>
</ListView>
```

用法上来说比较需要注意下与网页版的vue中`v-for`构造列表的区别.

在网页版的vue中我们通常都是用`v-for`构造列表的.而在`ListView`中我们通常用属性`for`来构造,这个属性的语法与`v-for`一致.
`ListView`不会像使用`v-for`循环时那样遍历列表,而是仅创建必要的视图以在屏幕上显示当前可见的项目,并在滚动时重新使用已在屏幕外的视图.此概念称为视图回收.

之所以要这么改就是因为移动端性能有限,不能像桌面端一样毫无顾忌的使用机器的资源.

还有一个需要注意的就是组件`<v-template>`,它的作用是将渲染模板注册进父组件以便重用.他可以设置属性`if`,如果不设置`if`则标明它是一个**默认模板**.在渲染时会遍历模板的渲染条件找出其中第一个满足的进行渲染,如果都不满足则使用默认模板渲染.可以在`if`中使用和`v-if`一样的语法,但是可以额外的使用如下3个变量

+ `$index`,当前项目的索引
+ `$even`,true表示当前项目的索引是偶数
+ `$odd`,true表示当前项的索引是奇数

需要注意`ListView`通常都会要设置`height`,这样可以有更好的性能.

我们可以看到`ListView`中每个元素之间都会有个分割线,可以使用属性`separatorColor`设置分割线的颜色,也可以设置为`transparent`来取消分割线

> 例子:使用ListView用CardView将屏幕填满


```vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <ListView for="p in simplecardprops" height="100%"> 
        <v-template>
          <SimpleCard v-bind="p"/>
        </v-template>
      </ListView>
    </StackLayout>
  </Page>
</template>
  

<script lang="ts">
import Vue from "vue";

import SimpleCard from "../components/SimpleCard.vue";

export default Vue.extend({
  components: {
    SimpleCard,
  },
  data: function () {
    return {
      simplecardprops: [
        {
          title: "test1",
          iconImgURL: "~/imgs/锦叶绿萝.png",
          mediaImgURL: "~/imgs/锦叶绿萝.png",
          description: "this is test's description1",
        },
        {
          title: "test2",
          iconImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
          mediaImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
          description: "this is test's description2",
        },
        {
          title: "test3",
          iconImgURL: "~/imgs/锦叶绿萝.png",
          mediaImgURL: "~/imgs/锦叶绿萝.png",
          description: "this is test's description3",
        },
        {
          title: "test4",
          iconImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
          mediaImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
          description: "this is test's description4",
        },
      ],
    };
  },
});
</script>
```

#### 垂直滚动列表

基础的列表组件过于简陋,并不太符合现在的常见的样式,社区提供了插件[@nativescript-community/ui-collectionview](https://github.com/nativescript-community/ui-collectionview)可以提供垂直滚动列表.

使用它先安装,然后在入口文件中添加如下代码注册:

```ts
import CollectionView from '@nativescript-community/ui-collectionview/vue';
Vue.use(CollectionView);
```

之后我们需要准备好一个`ObservableArray`来包装物品列表,然后数据需要做些修改,要增加`index`字段用于标识.然后将其绑定到`CollectionView`的`items`属性,并将属性`itemIdGenerator`设为`index`就好,

> 例子:使用垂直滚动列表替代ListView

```vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <CollectionView
        :items="simplecardprops"
        itemIdGenerator="index"
        colWidth="50%"
        rowHeight="200"
      >
        <v-template>
          <SimpleCard v-bind="item.prop" />
        </v-template>
      </CollectionView>
    </StackLayout>
  </Page>
</template>
  

<script lang="ts">
import Vue from "vue";
import { ObservableArray } from "@nativescript/core";
import SimpleCard from "../components/SimpleCard.vue";

export default Vue.extend({
  components: {
    SimpleCard,
  },
  data: function () {
    return {
      simplecardprops: new ObservableArray([
        {
          index: 0,
          prop: {
            title: "test1",
            iconImgURL: "~/imgs/锦叶绿萝.png",
            mediaImgURL: "~/imgs/锦叶绿萝.png",
            description: "this is test's description1",
          },
        },
        {
          index: 1,
          prop: {
            title: "test2",
            iconImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
            mediaImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
            description: "this is test's description2",
          },
        },
        {
          index: 2,
          prop: {
            title: "test3",
            iconImgURL: "~/imgs/锦叶绿萝.png",
            mediaImgURL: "~/imgs/锦叶绿萝.png",
            description: "this is test's description3",
          },
        },
        {
          index: 3,
          prop: {
            title: "test4",
            iconImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
            mediaImgURL: "~/imgs/建兰-玫瑰妖姬.jpg",
            description: "this is test's description4",
          },
        },
      ]),
    };
  },
});
</script>
```

#### 瀑布流

所谓瀑布流实际就是垂直滚动列表的一个样式上的变化,特点是只有一列,可以一直刷.
插件[@nativescript-community/ui-collectionview](https://github.com/nativescript-community/ui-collectionview)同样提供了瀑布流功能.要使用它除了要安装上面的`@nativescript-community/ui-collectionview`外还需要安装`@nativescript-community/ui-collectionview-waterfall`,然后在入口文件中除了要注册组件`CollectionView`外还要注册`waterfall`的插件

```ts
import CollectionView from '@nativescript-community/ui-collectionview/vue';
Vue.use(CollectionView);

import waterfallInstall from '@nativescript-community/ui-collectionview-waterfall';
waterfallInstall();
```

使用时设置属性`layoutStyle="waterfall"`即可

> 例子



#### 水平滑动列表

水平滑动列表的形式可以参考各种首页的顶部的banner,可以手动左右滑动,也可以自动定时滑动,这个一般用在活动广告等地方.社区提供了插件[@nativescript-community/ui-pager](https://github.com/nativescript-community/ui-pager)用于支持这种样式.


