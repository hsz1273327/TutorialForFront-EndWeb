# 提示型组件

提示型组件是用于提示某种状态或者提供一些主动交互的组件,可以分为

1. 状态提示组件
2. 消息提示
3. 对话框提示

## 状态提示组件

状态提示组件一般使用直观的图片或者动画提示一种状态.一般用于提示加载,下载等需要等待的功能的状态.又可以细分为

1. 圆形加载动画提示
2. 进度条

### 圆形加载动画提示

圆形加载动画提示一般都只用于展示等待状态.一般都是以一个boolean型的值来设置,为true则展示否则不展示.

+ [ActivityIndicator](https://nativescript-vue.org/cn/docs/elements/components/activity-indicator/)

    原生组件,在android下和ios下动画不同,但都是圆形,通过设置属性`busy`来控制是否展示,还可以监听事件`busyChange`来监控`busy`的取值变化.

+ [@nativescript-community/ui-material-activityindicator](https://www.npmjs.com/package/@nativescript-community/ui-material-activityindicator)

    material风格的圆型加载动画,其接口和`ActivityIndicator`完全一致,要用它我们需要安装`@nativescript-community/ui-material-activityindicator`,然后在入口文件中导入它

    ```ts
    import ActivityIndicatorPlugin from '@nativescript-community/ui-material-activityindicator/vue';

    Vue.use(ActivityIndicatorPlugin);
    ```

> 例子: 下面的例子将使用一个switch组件控制两个圆形加载动画提示组件交替展示

```Vue
<template>
  <Page actionBarHidden="true">
    <StackLayout>
      <Label text="Home--等待状态"></Label>
      <Switch v-model="isBusy" />
      <ActivityIndicator :busy="isBusy" @busyChange="onBusyChanged" />
      <MDActivityIndicator :busy="!isBusy" @busyChange="onBusyChanged" />
    </StackLayout>
  </Page>
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { EventData } from "@nativescript/core/data/observable";
import { ActivityIndicator } from "@nativescript/core/ui/activity-indicator";
export default Vue.extend({
  mounted: function () {
    console.log("&&&&mounted home frame");
  },
  data: function () {
    return {
      isBusy: true,
    };
  },
  methods: {
    onBusyChanged(evt: EventData) {
      let obj = evt.object as ActivityIndicator;
      console.log(`is busy ${obj.busy}`);
    },
  },
});
</script>
```

一般圆形加载动画的展示方法有两种:

1. 全页展示一个圆形加载动画,当等待时导航到这个加载页,加载完成退出导航回去
2. 页面最外层使用`<GridLayout rows="auto, *">`,主要内容和加载页都设置`row="0"`,圆形加载动画提示组件放在`<StackLayout row="0" rowSpan="2" :visibility="isBusy ? 'visible' : 'collapsed'" backgroundColor="#ECEFF1" opacity="0.5">`中.`opacity`用于设置透明度.一般带点透明效果体验会更好.

>例子

```Vue
<GridLayout rows="auto, *">
    <StackLayout row="0">
    <Label text="Home--等待状态"></Label>
    <Switch v-model="isBusy" />
    </StackLayout>
    <StackLayout
    row="0"
    rowSpan="2"
    :visibility="isBusy ? 'visible' : 'collapsed'"
    backgroundColor="#ECEFF1"
    opacity="0.5"
    >
    <ActivityIndicator
        row="1"
        width="100"
        height="100"
        busy="true"
        @busyChange="onBusyChanged"
    />
    </StackLayout>
</GridLayout>
```

### 进度条

进度条一般用在一些异步计算或者io任务中,比如上传下载,有时候也用于指示大型表单的填写进度.

+ [Progress](https://nativescript-vue.org/cn/docs/elements/components/progress/)

    原生组件,会从左到右显示进度,通过设置属性`value`和`maxValue`(默认100)控制进度.也可以监听`valueChange`事件监听每次value的变化.

+ [@nativescript-community/ui-material-progress](https://www.npmjs.com/package/@nativescript-community/ui-material-progress)

    material风格的圆型加载动画,其接口继承自`Progress`,同时增加了两个属性用于在无法知道maxValue时使用:

    + `indeterminate`,默认false,当设置为true时组件变为等待模式,动画为进度条会一直循环,受属性`busy`控制,此时其功能和`圆形加载动画提示`一样.
    + `busy`,默认false,当`indeterminate`为true时如果设置为true则显示,否则不显示

    要用它我们需要安装`@nativescript-community/ui-material-progress`,然后在入口文件中导入它

    ```ts
    import ProgressPlugin from '@nativescript-community/ui-material-progress/vue';

    Vue.use(ProgressPlugin);
    ```

>例子:

```Vue

<template>
  ...
    <Progress :value="currentProgress" />
    <MDProgress :value="currentProgress" maxValue="100"/>
    <MDProgress busy="true" indeterminate="true"/>
  ...
</template>
  
<script lang="ts">
import Vue from "nativescript-vue";
import { EventData } from "@nativescript/core/data/observable";
import { ActivityIndicator } from "@nativescript/core/ui/activity-indicator";
import { setInterval, clearInterval } from "@nativescript/core/timer";
interface Data {
  isBusy: boolean;
  currentProgress: number;
  interval: number | null;
}
export default Vue.extend({
  data: function (): Data {
    return {
      currentProgress: 50,
      interval: null,
    };
  },
  created() {
    this.interval = setInterval(() => {
      const newValue = (this.currentProgress + 1) % 100;
      this.currentProgress = newValue;
    }, 100);
  },
  beforeDestroy() {
    if (this.interval !== null) {
      clearInterval(this.interval);
    }
  },
});
</script>
```

## 消息提示