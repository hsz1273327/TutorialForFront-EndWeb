
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>优化项目 · Javascript攻略</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="hsz">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../使用Javascript搭建后端服务/" />
    
    
    <link rel="prev" href="属性展示.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"hsz1273327/TutorialForJavascript","types":["star","watch","fork"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="http://blog.hszofficial.site/" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../执行环境/">
            
                <a href="../../执行环境/">
            
                    
                    执行环境
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../执行环境/Javascript执行环境.html">
            
                <a href="../../执行环境/Javascript执行环境.html">
            
                    
                    Javascript执行环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../执行环境/代码风格.html">
            
                <a href="../../执行环境/代码风格.html">
            
                    
                    代码风格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../执行环境/api文档自动生成.html">
            
                <a href="../../执行环境/api文档自动生成.html">
            
                    
                    api文档自动生成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../执行环境/代码测试工具.html">
            
                <a href="../../执行环境/代码测试工具.html">
            
                    
                    代码测试工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../执行环境/log工具.html">
            
                <a href="../../执行环境/log工具.html">
            
                    
                    log工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../执行环境/性能基准测试.html">
            
                <a href="../../执行环境/性能基准测试.html">
            
                    
                    性能基准测试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../基础语法/">
            
                <a href="../../基础语法/">
            
                    
                    基础语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../基础语法/基本语法和代码结构.html">
            
                <a href="../../基础语法/基本语法和代码结构.html">
            
                    
                    基本语法和代码结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../基础语法/变量与值与对象.html">
            
                <a href="../../基础语法/变量与值与对象.html">
            
                    
                    变量与值与对象
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../基础语法/从运算符到函数.html">
            
                <a href="../../基础语法/从运算符到函数.html">
            
                    
                    从运算符到函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../基础语法/迭代器与生成器.html">
            
                <a href="../../基础语法/迭代器与生成器.html">
            
                    
                    迭代器与生成器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../基础语法/基本容器.html">
            
                <a href="../../基础语法/基本容器.html">
            
                    
                    基本容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../基础语法/异步编程.html">
            
                <a href="../../基础语法/异步编程.html">
            
                    
                    异步编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../../基础语法/面向对象编程.html">
            
                <a href="../../基础语法/面向对象编程.html">
            
                    
                    面向对象编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../基础语法/模块化编程.html">
            
                <a href="../../基础语法/模块化编程.html">
            
                    
                    模块化编程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../../基础语法/特殊对象和特殊接口.html">
            
                <a href="../../基础语法/特殊对象和特殊接口.html">
            
                    
                    特殊对象和特殊接口
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../">
            
                <a href="../">
            
                    
                    web前端技术
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../前端概览/">
            
                <a href="../前端概览/">
            
                    
                    前端概览
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../前端概览/前端应用页面规范/">
            
                <a href="../前端概览/前端应用页面规范/">
            
                    
                    前端应用页面规范
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1.1" data-path="../前端概览/前端应用页面规范/元数据获取.html">
            
                <a href="../前端概览/前端应用页面规范/元数据获取.html">
            
                    
                    元数据获取
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.2" data-path="../前端概览/前端应用页面规范/语义化标签与页面布局.html">
            
                <a href="../前端概览/前端应用页面规范/语义化标签与页面布局.html">
            
                    
                    语义化标签与页面布局
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.3" data-path="../前端概览/前端应用页面规范/模板标签.html">
            
                <a href="../前端概览/前端应用页面规范/模板标签.html">
            
                    
                    模板标签
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.4" data-path="../前端概览/前端应用页面规范/交互事件.html">
            
                <a href="../前端概览/前端应用页面规范/交互事件.html">
            
                    
                    交互事件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.1.5" data-path="../前端概览/前端应用页面规范/桌面级消息提醒.html">
            
                <a href="../前端概览/前端应用页面规范/桌面级消息提醒.html">
            
                    
                    桌面级消息提醒
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../前端概览/前端应用调用本地资源/">
            
                <a href="../前端概览/前端应用调用本地资源/">
            
                    
                    前端应用调用本地资源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.2.1" data-path="../前端概览/前端应用调用本地资源/使用本地文件系统.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用本地文件系统.html">
            
                    
                    使用本地文件系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2.2" data-path="../前端概览/前端应用调用本地资源/使用本地存储.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用本地存储.html">
            
                    
                    使用本地存储
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2.3" data-path="../前端概览/前端应用调用本地资源/使用本地摄像头和麦克风.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用本地摄像头和麦克风.html">
            
                    
                    使用本地摄像头和麦克风
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2.4" data-path="../前端概览/前端应用调用本地资源/使用语音.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用语音.html">
            
                    
                    使用语音
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2.5" data-path="../前端概览/前端应用调用本地资源/使用本地多线程资源.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用本地多线程资源.html">
            
                    
                    使用本地多线程资源
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2.6" data-path="../前端概览/前端应用调用本地资源/使用本地gpu计算资源.html">
            
                <a href="../前端概览/前端应用调用本地资源/使用本地gpu计算资源.html">
            
                    
                    使用本地gpu计算资源
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../前端概览/前端应用与通信/">
            
                <a href="../前端概览/前端应用与通信/">
            
                    
                    前端应用与通信
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.3.1" data-path="../前端概览/前端应用与通信/ajax及相关技术.html">
            
                <a href="../前端概览/前端应用与通信/ajax及相关技术.html">
            
                    
                    ajax及相关技术
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3.2" data-path="../前端概览/前端应用与通信/websocket.html">
            
                <a href="../前端概览/前端应用与通信/websocket.html">
            
                    
                    websocket
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3.3" data-path="../前端概览/前端应用与通信/grpc-web.html">
            
                <a href="../前端概览/前端应用与通信/grpc-web.html">
            
                    
                    grpc-web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3.4" data-path="../前端概览/前端应用与通信/WebRTC进行端对端通信.html">
            
                <a href="../前端概览/前端应用与通信/WebRTC进行端对端通信.html">
            
                    
                    WebRTC进行端对端通信
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3.5" data-path="../前端概览/前端应用与通信/EventSource.html">
            
                <a href="../前端概览/前端应用与通信/EventSource.html">
            
                    
                    EventSource
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../Stylus/">
            
                <a href="../Stylus/">
            
                    
                    Stylus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../Stylus/注释.html">
            
                <a href="../Stylus/注释.html">
            
                    
                    注释
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../Stylus/选择器.html">
            
                <a href="../Stylus/选择器.html">
            
                    
                    选择器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../Stylus/变量与插值.html">
            
                <a href="../Stylus/变量与插值.html">
            
                    
                    变量与插值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../Stylus/运算符.html">
            
                <a href="../Stylus/运算符.html">
            
                    
                    运算符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../Stylus/控制语句.html">
            
                <a href="../Stylus/控制语句.html">
            
                    
                    控制语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../Stylus/内置方法.html">
            
                <a href="../Stylus/内置方法.html">
            
                    
                    内置方法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.7" data-path="../Stylus/混入模式与函数.html">
            
                <a href="../Stylus/混入模式与函数.html">
            
                    
                    混入模式与函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.8" data-path="../Stylus/复用.html">
            
                <a href="../Stylus/复用.html">
            
                    
                    复用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.9" data-path="../Stylus/at字符与特殊用法.html">
            
                <a href="../Stylus/at字符与特殊用法.html">
            
                    
                    @字符与特殊用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.10" data-path="../Stylus/jsApi.html">
            
                <a href="../Stylus/jsApi.html">
            
                    
                    jsApi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../Webpack/">
            
                <a href="../Webpack/">
            
                    
                    Webpack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="./">
            
                <a href="./">
            
                    
                    Vue
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.4.1" data-path="工具链.html">
            
                <a href="工具链.html">
            
                    
                    工具链
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.2" data-path="组件.html">
            
                <a href="组件.html">
            
                    
                    组件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.3" data-path="使用element组件包构建前端项目.html">
            
                <a href="使用element组件包构建前端项目.html">
            
                    
                    使用element组件包构建前端项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.4" data-path="数据状态维护.html">
            
                <a href="数据状态维护.html">
            
                    
                    数据状态维护
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.5" data-path="路由.html">
            
                <a href="路由.html">
            
                    
                    路由
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.6" data-path="从后端同步数据.html">
            
                <a href="从后端同步数据.html">
            
                    
                    从后端同步数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4.7" data-path="属性展示.html">
            
                <a href="属性展示.html">
            
                    
                    属性展示
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.4.8" data-path="优化项目.html">
            
                <a href="优化项目.html">
            
                    
                    优化项目
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../使用Javascript搭建后端服务/">
            
                <a href="../../使用Javascript搭建后端服务/">
            
                    
                    使用Javascript搭建后端服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../使用Javascript搭建后端服务/http接口服务.html">
            
                <a href="../../使用Javascript搭建后端服务/http接口服务.html">
            
                    
                    http接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../使用Javascript搭建后端服务/Websocket接口服务.html">
            
                <a href="../../使用Javascript搭建后端服务/Websocket接口服务.html">
            
                    
                    Websocket接口服务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../使用Javascript搭建后端服务/GRpc接口服务.html">
            
                <a href="../../使用Javascript搭建后端服务/GRpc接口服务.html">
            
                    
                    GRpc接口服务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >优化项目</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x4F18;&#x5316;&#x9879;&#x76EE;"><b>1. </b>&#x4F18;&#x5316;&#x9879;&#x76EE;</a></li><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#appvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><b>1.1. </b>App.vue&#x7EC6;&#x8282;&#x4F18;&#x5316;</a></li><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;"><b>1.1.1. </b>router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;"><b>1.1.2. </b>router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;</a></li></ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#detailvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><b>1.2. </b>detail.vue&#x7EC6;&#x8282;&#x4F18;&#x5316;</a></li><ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;"><b>1.2.1. </b>&#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;"><b>1.2.2. </b>&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;"><b>1.2.3. </b>&#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;</a></li></ul><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;"><b>1.3. </b>&#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;</a></li><li><span class="title-icon fa fa-hand-o-right"></span><a href="#&#x603B;&#x7ED3;"><b>1.4. </b>&#x603B;&#x7ED3;</a></li></ul></ul></div><a href="#&#x4F18;&#x5316;&#x9879;&#x76EE;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x4F18;&#x5316;&#x9879;&#x76EE;"><a name="&#x4F18;&#x5316;&#x9879;&#x76EE;" class="anchor-navigation-ex-anchor" href="#&#x4F18;&#x5316;&#x9879;&#x76EE;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x4F18;&#x5316;&#x9879;&#x76EE;</h1>
<p>&#x672C;&#x90E8;&#x5206;&#x662F;&#x5BF9;vue.js&#x57FA;&#x7840;&#x7528;&#x6CD5;&#x7684;&#x4F18;&#x5316;&#x8865;&#x5B8C;,&#x5BF9;&#x5E94;&#x4EE3;&#x7801;&#x5728;<a href="https://github.com/TutorialForJavascript/hero-tutorial/tree/optimization" target="_blank">optimization&#x5206;&#x652F;</a>.</p>
<p>&#x6211;&#x4EEC;&#x7684;&#x82F1;&#x96C4;&#x624B;&#x518C;&#x9879;&#x76EE;&#x5DF2;&#x7ECF;&#x80FD;&#x6EE1;&#x8DB3;&#x6240;&#x6709;&#x529F;&#x80FD;&#x4E86;,&#x4F46;&#x4EA4;&#x4E92;&#x4F53;&#x9A8C;&#x4E0A;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x7455;&#x75B5;.&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x4E00;&#x4E9B;&#x5C0F;&#x6280;&#x5DE7;&#x548C;html5&#x7684;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x63A9;&#x76D6;&#x8FD9;&#x4E9B;&#x7F3A;&#x9677;&#x63D0;&#x9AD8;&#x4EA4;&#x4E92;&#x4F53;&#x9A8C;.</p>
<p>&#x672C;&#x6587;&#x4E5F;&#x662F;&#x8FD9;&#x90E8;&#x5206;&#x7684;&#x6700;&#x540E;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;,&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4F1A;&#x8FDB;&#x5165;PWA&#x5E94;&#x7528;&#x9636;&#x6BB5;,&#x8FDB;&#x4E00;&#x6B65;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x7F51;&#x9875;&#x6539;&#x9020;&#x6210;PWA&#x5E94;&#x7528;.</p>
<h2 id="appvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><a name="appvue&#x7EC6;&#x8282;&#x4F18;&#x5316;" class="anchor-navigation-ex-anchor" href="#appvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. App.vue&#x7EC6;&#x8282;&#x4F18;&#x5316;</h2>
<p>&#x529F;&#x80FD;&#x51B3;&#x5B9A;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x80FD;&#x4E0D;&#x80FD;&#x8FDB;&#x5165;&#x5E02;&#x573A;,&#x7EC6;&#x8282;&#x51B3;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x4EA7;&#x54C1;&#x5728;&#x5E02;&#x573A;&#x4E0A;&#x7684;&#x751F;&#x5B58;&#x72B6;&#x51B5;.&#x7F51;&#x9875;&#x7684;&#x7EC6;&#x8282;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x5C31;&#x4F53;&#x73B0;&#x5728;&#x4EA4;&#x4E92;&#x7684;&#x8FDE;&#x8D2F;&#x6027;&#x4E0A;.</p>
<p>&#x8FD9;&#x90E8;&#x5206;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x5728;&#x4EA4;&#x4E92;&#x7684;&#x8FDE;&#x8D2F;&#x6027;&#x4E0A;&#x505A;&#x6587;&#x7AE0;.</p>
<h3 id="router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;"><a name="router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;" class="anchor-navigation-ex-anchor" href="#router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. router&#x5207;&#x6362;&#x70B9;&#x51FB;&#x4F18;&#x5316;</h3>
<p>&#x6211;&#x4EEC;&#x7684;router&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x5DE5;&#x4F5C;,&#x4F46;&#x5F88;&#x5BB9;&#x6613;&#x51FA;&#x73B0;&#x70B9;&#x51FB;&#x540E;&#x6CA1;&#x6709;&#x53CD;&#x5E94;&#x7684;&#x60C5;&#x51B5;,&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4E3A;&#x4E86;&#x6F14;&#x793A;&#x5982;&#x4F55;&#x7528;<code>vue-router</code>&#x5C06;<code>router-view</code>&#x653E;&#x5728;&#x4E86;<code>el-menu-item</code>&#x5185;&#x90E8;,&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x70B9;&#x5230;&#x8FD9;&#x4E2A;&#x6807;&#x7B7E;&#x624D;&#x4F1A;&#x8DF3;&#x8F6C;.
&#x5B9E;&#x9645;&#x4E0A;<code>el-menu</code>&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x548C;<code>router-view</code>&#x7684;&#x7EE7;&#x627F;,&#x53EA;&#x9700;&#x8981;&#x5C06;<code>el-menu</code>&#x7684;<code>router</code>&#x5C5E;&#x6027;&#x70B9;&#x4EAE;&#x5E76;&#x4E14;&#x5C06;<code>el-menu-item</code>&#x7684;<code>index</code>&#x6539;&#x4E3A;&#x8DEF;&#x7531;&#x7684;&#x8DEF;&#x5F84;,&#x5373;&#x53EF;.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  ...
            <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;el-menu-demo&quot;</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&quot;horizontal&quot;</span> <span class="hljs-attr">router</span>, <span class="hljs-attr">default-active</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>&#x4EEA;&#x8868;&#x76D8;<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;/herolist&quot;</span>&gt;</span>&#x82F1;&#x96C4;&#x5217;&#x8868;<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">&quot;/herodetail&quot;</span>&gt;</span>&#x521B;&#x5EFA;&#x82F1;&#x96C4;<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span>
  ...
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>&#x8FD9;&#x6837;&#x4FEE;&#x6539;&#x540E;&#x70B9;&#x51FB;&#x884C;&#x4E3A;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4F18;&#x5316;&#x4E86;.</p>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x7455;&#x75B5;&#x662F;&#x5F53;&#x6211;&#x4EEC;&#x9009;&#x4E2D;&#x67D0;&#x4E2A;&#x8DEF;&#x5F84;&#x540E;&#x5237;&#x65B0;,&#x9875;&#x9762;&#x4F1A;&#x5237;&#x65B0;--&#x5BFC;&#x822A;&#x680F;&#x4F1A;&#x56DE;&#x5230;&#x521D;&#x59CB;&#x72B6;&#x6001;,&#x4F46;<code>router-view</code>&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;.&#x8FD9;&#x5C31;&#x4F1A;&#x5F88;&#x5947;&#x602A;&#x4E86;,&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x5229;&#x7528;html5&#x7684;<code>sessionStorage</code>&#x5C06;&#x5F53;&#x524D;&#x7684;&#x9875;&#x9762;&#x8DEF;&#x7531;&#x7F13;&#x5B58;&#x4E0B;&#x6765;.<code>sessionStorage</code>&#x53EA;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x5F53;&#x524D;&#x9875;&#x9762;&#x6709;&#x6548;,&#x591A;&#x5F00;&#x591A;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x9875;&#x9762;&#x4E0D;&#x4F1A;&#x76F8;&#x4E92;&#x5F71;&#x54CD;,&#x5E76;&#x4E14;&#x5B83;&#x4F1A;&#x5728;&#x9875;&#x9762;&#x5173;&#x95ED;&#x65F6;&#x5220;&#x9664;,&#x8FD9;&#x5C31;&#x975E;&#x5E38;&#x9002;&#x5408;&#x73B0;&#x5728;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x4E86;.</p>
<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<code>memu.js</code>&#x7684;vuex&#x5BF9;&#x8C61;.&#x5B83;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;.</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> state = {
    current_index: <span class="hljs-string">&quot;/&quot;</span>
}


<span class="hljs-comment">// getters</span>
<span class="hljs-keyword">const</span> getters = {

}

<span class="hljs-comment">// actions &#x5B9A;&#x4E49;&#x4E1A;&#x52A1;&#x903B;&#x8F91;</span>
<span class="hljs-keyword">const</span> actions = {
    changeCurrrentIndex: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, payload</span>) </span>{
        sessionStorage.setItem(<span class="hljs-string">&quot;current_index&quot;</span>, payload.current_index)
    },
    loadCurrrentIndex: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
        <span class="hljs-keyword">let</span> current_index = sessionStorage.getItem(<span class="hljs-string">&quot;current_index&quot;</span>)
        <span class="hljs-keyword">if</span> (current_index) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`load index from storage: <span class="hljs-subst">${current_index}</span>`</span>)
            <span class="hljs-keyword">let</span> payload = { current_index }
            context.commit(<span class="hljs-string">&apos;changeCurrrentIndex&apos;</span>, payload)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;no index in storage&quot;</span>)
        }
    }
}

<span class="hljs-comment">// mutations &#x5B9A;&#x4E49;&#x6570;&#x636E;&#x72B6;&#x6001;&#x7684;&#x64CD;&#x4F5C;</span>
<span class="hljs-keyword">const</span> mutations = {
    changeCurrrentIndex(state, payload) {
        <span class="hljs-keyword">let</span> current_index = payload.current_index
        state.current_index = current_index
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`load current_index <span class="hljs-subst">${current_index}</span>`</span>)
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    namespaced: <span class="hljs-literal">true</span>,
    state,
    getters,
    actions,
    mutations
}
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5176;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;:</p>
<ul>
<li><code>changeCurrrentIndex</code>&#x5F53;&#x9875;&#x9762;&#x8DF3;&#x8F6C;&#x5230;index&#x5BF9;&#x5E94;&#x8DEF;&#x5F84;&#x65F6;&#x8C03;&#x7528;,&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x9875;&#x9762;&#x6570;&#x636E;,&#x8FD9;&#x4E2A;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E3A;<code>el-menu</code>&#x7684;<code>select</code>&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5B9E;&#x73B0;</li>
<li><code>loadCurrrentIndex</code>app&#x8282;&#x70B9;&#x521B;&#x5EFA;&#x65F6;&#x8C03;&#x7528;,&#x5C06;&#x7F13;&#x5B58;&#x4E0B;&#x6765;&#x7684;index&#x4FE1;&#x606F;&#x52A0;&#x8F7D;&#x5230;<code>current_index</code></li>
</ul>
<h3 id="router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;"><a name="router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;" class="anchor-navigation-ex-anchor" href="#router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. router&#x5207;&#x6362;&#x8FC7;&#x6E21;&#x6548;&#x679C;</h3>
<p>&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x5BFC;&#x822A;&#x5207;&#x6362;view&#x6BD4;&#x8F83;&#x751F;&#x786C;,&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;vue&#x81EA;&#x5E26;&#x7684;<a href="https://cn.vuejs.org/v2/guide/transitions.html" target="_blank">&#x8FC7;&#x6E21;&#x52A8;&#x753B;</a>&#x6807;&#x7B7E;<code>transition</code>&#x6765;&#x4E3A;<code>router-view</code>&#x90E8;&#x5206;&#x7684;&#x52A0;&#x8F7D;&#x63D0;&#x4F9B;&#x8FC7;&#x6E21;&#x6548;&#x679C;.</p>
<p><code>transition</code>&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x7684;css&#x7684;&#x8FC7;&#x6E21;&#x6548;&#x679C;&#x5B9A;&#x4E49;.&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B9A;&#x4E49;css&#x90E8;&#x5206;.</p>
<p>&#x6700;&#x7EC8;&#x6211;&#x4EEC;&#x7684;<code>App.vue</code>&#x4FEE;&#x6539;&#x4E3A;&#x4E86;:</p>
<pre><code class="lang-vue">&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;el-container&gt;
      &lt;el-header height=&quot;120&quot;&gt;
        &lt;header&gt;
          &lt;el-row :gutter=&quot;10&quot; type=&quot;flex&quot; justify=&quot;center&quot;&gt;
            &lt;h1&gt;&#x82F1;&#x96C4;&#x6307;&#x5357;&lt;/h1&gt;
          &lt;/el-row&gt;
          &lt;el-row :gutter=&quot;10&quot; type=&quot;flex&quot; justify=&quot;center&quot;&gt;
            &lt;el-menu
              :default-active=&quot;activeIndex&quot;
              class=&quot;el-menu-demo&quot;
              mode=&quot;horizontal&quot;
              router
              @select=&quot;changeIndex&quot;
            &gt;
              &lt;el-menu-item index=&quot;/&quot;&gt;&#x4EEA;&#x8868;&#x76D8;&lt;/el-menu-item&gt;
              &lt;el-menu-item index=&quot;/herolist&quot;&gt;&#x82F1;&#x96C4;&#x5217;&#x8868;&lt;/el-menu-item&gt;
              &lt;el-menu-item index=&quot;/herodetail&quot;&gt;&#x521B;&#x5EFA;&#x82F1;&#x96C4;&lt;/el-menu-item&gt;
            &lt;/el-menu&gt;
          &lt;/el-row&gt;
          &lt;el-divider&gt;&lt;/el-divider&gt;
        &lt;/header&gt;
      &lt;/el-header&gt;
      &lt;el-main&gt;
        &lt;transition name=&quot;slide&quot; mode=&quot;out-in&quot; appear&gt;
          &lt;router-view&gt;&lt;/router-view&gt;
        &lt;/transition&gt;
      &lt;/el-main&gt;
    &lt;/el-container&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: &quot;app&quot;,
  data() {
    return {
      activeIndex: &quot;/&quot;
    };
  },
  methods: {
    changeIndex: function(index, indexPath) {
      console.log(index);
      this.$store.dispatch(&quot;menu/changeCurrrentIndex&quot;, {
        current_index: index
      });
    }
  },
  created: function() {
    this.$store.dispatch(&quot;menu/loadCurrrentIndex&quot;);
    this.$store.dispatch(&quot;herolist/syncHeros&quot;);
    console.log(`app create ${this.$store.state.menu.current_index}`);
    this.activeIndex = this.$store.state.menu.current_index;
  }
};
&lt;/script&gt;

&lt;style&gt;
#app {
  font-family: &quot;Avenir&quot;, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
.slide-enter-active,
.slide-leave-active {
  transition: opacity 0.5s;
}
.slide-enter, .slide-leave-to /* .fade-leave-active below version 2.1.8 */ {
  opacity: 0;
}
&lt;/style&gt;
</code></pre>
<h2 id="detailvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><a name="detailvue&#x7EC6;&#x8282;&#x4F18;&#x5316;" class="anchor-navigation-ex-anchor" href="#detailvue&#x7EC6;&#x8282;&#x4F18;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. detail.vue&#x7EC6;&#x8282;&#x4F18;&#x5316;</h2>
<p>detai.vue&#x7EC4;&#x4EF6;&#x662F;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x548C;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x7684;&#x7EC4;&#x4EF6;,&#x5176;&#x4ED6;&#x66F4;&#x591A;&#x7684;&#x662F;&#x5C55;&#x793A;,&#x8FD9;&#x5757;&#x4E5F;&#x662F;&#x6700;&#x9700;&#x8981;&#x4F18;&#x5316;&#x7684;&#x90E8;&#x5206;.
&#x7531;&#x4E8E;&#x6709;&#x8868;&#x5355;&#x8981;&#x586B;&#x800C;&#x8868;&#x5355;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6700;&#x5BB9;&#x6613;&#x4F53;&#x9A8C;&#x5DEE;&#x7684;&#x90E8;&#x5206;,&#x60F3;&#x8C61;&#x4E0B;&#x6709;&#x5F88;&#x591A;&#x673A;&#x6784;&#x7684;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;,&#x4F60;&#x8981;&#x7533;&#x8BF7;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;,&#x4ED6;&#x4EEC;&#x5C31;&#x4F1A;&#x7ED9;&#x4F60;&#x4E00;&#x4E2A;&#x8868;&#x5355;&#x8BA9;&#x4F60;&#x586B;.
&#x7136;&#x540E;&#x60B2;&#x5267;&#x7684;&#x662F;&#x5982;&#x679C;&#x4E2D;&#x9014;&#x4F60;&#x6709;&#x4E8B;&#x5C31;&#x9000;&#x51FA;&#x53BB;&#x4E86;&#x6216;&#x8005;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#x6B7B;&#x6D3B;&#x63D0;&#x4EA4;&#x4E0D;&#x4E0A;&#x53BB;,&#x4E0B;&#x6B21;&#x56DE;&#x6765;&#x4F60;&#x5C31;&#x5F97;&#x4ECE;&#x5934;&#x518D;&#x586B;&#x4E00;&#x904D;,&#x5F80;&#x5F80;&#x8FD9;&#x79CD;&#x8868;&#x5355;&#x8FD8;&#x7279;&#x522B;&#x957F;,&#x8FD9;&#x5C31;&#x4F1A;&#x4F53;&#x9A8C;&#x5F88;&#x5DEE;&#x751A;&#x81F3;&#x8FD8;&#x4E0D;&#x5982;&#x53BB;&#x7EBF;&#x4E0B;&#x5904;&#x7406;.</p>
<p>&#x53E6;&#x4E00;&#x4E2A;&#x70B9;&#x662F;&#x5904;&#x7406;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;.&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x7F51;&#x7EDC;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;,&#x8FD9;&#x662F;&#x7F51;&#x7EDC;&#x81EA;&#x8EAB;&#x7684;&#x7279;&#x70B9;.&#x56E0;&#x6B64;&#x50CF;&#x8BE6;&#x60C5;&#x9875;&#x8FD9;&#x6837;&#x9700;&#x8981;&#x73B0;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x7684;&#x9875;&#x9762;&#x5C31;&#x4F1A;&#x5F88;&#x4E0D;&#x597D;&#x5904;&#x7406;,&#x7528;&#x6237;&#x9700;&#x8981;&#x77E5;&#x9053;&#x9875;&#x9762;&#x662F;&#x5426;&#x51C6;&#x5907;&#x597D;&#x4E86;.
&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x52A0;&#x8F7D;&#x52A8;&#x753B;&#x6765;&#x544A;&#x8BC9;&#x7528;&#x6237;&#x9875;&#x9762;&#x6709;&#x6CA1;&#x51C6;&#x5907;&#x597D;.</p>
<h3 id="&#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;"><a name="&#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;" class="anchor-navigation-ex-anchor" href="#&#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. &#x7B49;&#x5F85;&#x52A0;&#x8F7D;&#x52A8;&#x753B;</h3>
<p>element&#x63D0;&#x4F9B;&#x4E86;<a href="https://element.eleme.cn/#/zh-CN/component/loading" target="_blank">Loading</a>&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7B49;&#x5F85;&#x753B;&#x9762;.
&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;vue&#x6307;&#x4EE4;<code>v-loading</code>&#x7528;&#x4E8E;&#x63A9;&#x76D6;&#x7EC4;&#x4EF6;&#x548C;&#x5176;&#x5B50;&#x7EC4;&#x4EF6;,&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4FEE;&#x9970;&#x7B26;&#x6765;&#x5B9A;&#x4E49;&#x63A9;&#x76D6;&#x7684;&#x8303;&#x56F4;&#x548C;&#x7279;&#x70B9;.&#x5B83;&#x652F;&#x6301;&#x7684;&#x4FEE;&#x9970;&#x7B26;&#x6709;:</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;</th>
<th>&#x8BF4;&#x660E;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x53EF;&#x9009;&#x503C;</th>
<th>&#x9ED8;&#x8BA4;&#x503C;</th>
</tr>
</thead>
<tbody>
<tr>
<td>target</td>
<td>&#x9700;&#x8981;&#x8986;&#x76D6;&#x7684;DOM&#x8282;&#x70B9;.&#x53EF;&#x4F20;&#x5165;&#x4E00;&#x4E2A;DOM&#x5BF9;&#x8C61;&#x6216;&#x5B57;&#x7B26;&#x4E32;;&#x82E5;&#x4F20;&#x5165;&#x5B57;&#x7B26;&#x4E32;&#x5219;&#x4F1A;&#x5C06;&#x5176;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165;document.querySelector&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x5BF9;&#x5E94;DOM&#x8282;&#x70B9;.</td>
<td>object/string</td>
<td>---</td>
<td>document.body</td>
</tr>
<tr>
<td>body</td>
<td>&#x4EE5;&#x4F7F;&#x906E;&#x7F69;&#x63D2;&#x5165;&#x81F3;DOM&#x4E2D;&#x7684;<code>body</code>&#x4E0A;</td>
<td>boolean</td>
<td>---</td>
<td>false</td>
</tr>
<tr>
<td>fullscreen</td>
<td>&#x5168;&#x5C4F;&#x906E;&#x7F69;</td>
<td>boolean</td>
<td>---</td>
<td>true</td>
</tr>
<tr>
<td>lock</td>
<td>&#x9501;&#x5B9A;&#x5C4F;&#x5E55;&#x7684;&#x6EDA;&#x52A8;</td>
<td>boolean</td>
<td>---</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>&#x800C;&#x5176;&#x503C;&#x5FC5;&#x987B;&#x662F;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;,<code>true</code>&#x8868;&#x793A;&#x663E;&#x793A;&#x52A0;&#x8F7D;&#x52A8;&#x753B;,&#x5426;&#x5219;&#x4E0D;&#x5C55;&#x793A;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x5B83;&#x9ED8;&#x8BA4;&#x7684;&#x8F6C;&#x5708;&#x5708;&#x6837;&#x5F0F;&#x7B80;&#x5355;&#x5C55;&#x793A;&#x4E0B;.</p>
<pre><code class="lang-vue">&lt;template&gt;
  &lt;div class=&quot;herodetail&quot; v-loading=&quot;show&quot;&gt;
    ...
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
...

export default {
  ...
  computed: {
    ...
    show: function() {
          if (this.id &amp;&amp; !this.hero.name &amp;&amp; Object.keys(this.hero.quality).length === 0) {
            return true;
          } else {
            return false;
          }
        },
  ...
}
&lt;/script&gt;
</code></pre>
<h3 id="&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;"><a name="&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;" class="anchor-navigation-ex-anchor" href="#&#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. &#x7F13;&#x5B58;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4F46;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;</h3>
<p>&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x751F;&#x6210;&#x82F1;&#x96C4;&#x7684;&#x7F13;&#x5B58;&#x662F;&#x65E0;&#x611F;&#x7684;,&#x90A3;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x5668;&#x6765;&#x4E00;&#x76F4;&#x76D1;&#x542C;<code>hero</code>&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x5316;&#x60C5;&#x51B5;&#x7136;&#x540E;&#x6839;&#x636E;&#x5176;&#x53D8;&#x5316;&#x60C5;&#x51B5;&#x505A;&#x7F13;&#x5B58;,&#x800C;&#x5728;&#x7EC4;&#x4EF6;&#x521B;&#x5EFA;&#x65F6;(&#x5373;&#x5229;&#x7528;&#x94A9;&#x5B50;<code>created</code>)&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6839;&#x636E;&#x662F;&#x5426;&#x6709;<code>id</code>&#x6765;&#x5224;&#x522B;&#x662F;&#x4E0D;&#x662F;&#x521B;&#x5EFA;&#x9875;.&#x4E5F;&#x5C31;&#x53EF;&#x4EE5;&#x5224;&#x522B;&#x9700;&#x4E0D;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x7F13;&#x5B58;&#x7684;&#x5DF2;&#x751F;&#x6210;&#x672A;&#x63D0;&#x4EA4;&#x7684;&#x82F1;&#x96C4;.&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x4E2D;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5C06;&#x8FD9;&#x4E2A;&#x5B58;&#x50A8;&#x903B;&#x8F91;&#x653E;&#x5728;vuex&#x4E2D;&#x5904;&#x7406;,
&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x4E1A;&#x52A1;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x600E;&#x4E48;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x522B;&#x7684;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x77E5;&#x9053;.&#x800C;App.vue&#x4E2D;&#x5219;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x5B50;&#x7EC4;&#x4EF6;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5F53;&#x524D;&#x6240;&#x5728;&#x7684;index&#x4FE1;&#x606F;.</p>
<p>&#x6B64;&#x5904;&#x7684;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x4F9D;&#x7136;&#x4F7F;&#x7528;&#x7684;&#x662F;<code>sessionStorage</code>,&#x8FD9;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x9000;&#x51FA;&#x9875;&#x9762;,&#x8FD9;&#x4E2A;&#x7F13;&#x5B58;&#x5C31;&#x4F1A;&#x6D88;&#x5931;,&#x5982;&#x679C;&#x60F3;&#x5B9E;&#x73B0;&#x9000;&#x51FA;&#x9875;&#x9762;&#x4E5F;&#x4E0D;&#x4F1A;&#x6D88;&#x5931;&#x53EF;&#x4EE5;&#x6539;&#x7528;<code>localStorage</code>&#x63A5;&#x53E3;&#x662F;&#x4E00;&#x81F4;&#x7684;.
&#x6700;&#x7EC8;&#x6211;&#x4EEC;&#x7684;<code>herodetail.vue</code>&#x8FD9;&#x6837;:</p>
<pre><code class="lang-vue">&lt;template&gt;
  &lt;div class=&quot;herodetail&quot; v-loading=&quot;show&quot;&gt;
    &lt;el-row type=&quot;flex&quot; justify=&quot;center&quot;&gt;
      &lt;h1&gt;&#x82F1;&#x96C4;&#x8BE6;&#x60C5;&lt;/h1&gt;
    &lt;/el-row&gt;
    &lt;el-row type=&quot;flex&quot; justify=&quot;center&quot;&gt;
      &lt;el-col :span=&quot;6&quot;&gt;
        &lt;el-card shadow=&quot;hover&quot; v-if=&quot;id&quot;&gt;
          &lt;template v-slot:header&gt;
            &lt;div class=&quot;clearfix&quot;&gt;
              &lt;span&gt;&lt;/span&gt;
            &lt;/div&gt;
          &lt;/template&gt;
          &lt;div&gt;
            &#x540D;&#x5B57;&#xFF1A;
            &lt;el-input v-model=&quot;hero.name&quot; :placeholder=&quot;hero.name&quot;&gt;&lt;/el-input&gt;
            &lt;el-button type=&quot;primary&quot; round @click=&quot;submitHero&quot;&gt;&#x63D0;&#x4EA4;&lt;/el-button&gt;
            &lt;el-button type=&quot;primary&quot; round @click=&quot;goBack&quot;&gt;&#x540E;&#x9000;&lt;/el-button&gt;
          &lt;/div&gt;
        &lt;/el-card&gt;
        &lt;el-card shadow=&quot;hover&quot; v-else&gt;
          &#x540D;&#x5B57;&#xFF1A;
          &lt;el-input v-model=&quot;hero.name&quot; placeholder=&quot;&#x8BF7;&#x8F93;&#x5165;&#x82F1;&#x96C4;&#x7684;&#x540D;&#x5B57;&quot;&gt;&lt;/el-input&gt;
          &lt;el-button type=&quot;primary&quot; round @click=&quot;randomHeroQuality&quot;&gt;&#x968F;&#x673A;&#x751F;&#x6210;&lt;/el-button&gt;
          &lt;el-button type=&quot;primary&quot; round @click=&quot;submitHero&quot; v-if=&quot;has_quality &amp;&amp; hero.name&quot;&gt;&#x63D0;&#x4EA4;&lt;/el-button&gt;
        &lt;/el-card&gt;
      &lt;/el-col&gt;
      &lt;el-col :span=&quot;12&quot; v-if=&quot;has_quality&quot;&gt;
        &lt;h4&gt;&#x82F1;&#x96C4;&#x5C5E;&#x6027;&lt;/h4&gt;
        &lt;ve-radar :data=&quot;chartData&quot; :after-config=&quot;afterconfig&quot;&gt;&lt;/ve-radar&gt;
      &lt;/el-col&gt;
    &lt;/el-row&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import { mapActions } from &quot;vuex&quot;;
import { random100 } from &quot;../utils&quot;;

export default {
  name: &quot;herodetail&quot;,
  data: function() {
    return {
      hero: {
        name: &quot;&quot;,
        quality: {}
      }
    };
  },
  props: {
    id: {
      type: String,
      default: null
    }
  },
  computed: {
    show: function() {
      if (this.id &amp;&amp; !this.hero.name &amp;&amp; Object.keys(this.hero.quality).length === 0) {
        return true;
      } else {
        return false;
      }
    },
    has_quality: function() {
      if (Object.keys(this.hero.quality).length !== 0) {
        return true;
      } else {
        return false;
      }
    },
    chartData: function() {
      let data = {
        columns: [&quot;name&quot;, ...Object.keys(this.hero.quality)],
        rows: [{ name: this.hero.name, ...this.hero.quality }]
      };
      return data;
    }
  },
  methods: {
    ...mapActions(&quot;herolist&quot;, [&quot;appendHero&quot;, &quot;updateHero&quot;]),
    afterconfig: function(option) {
      option.radar.indicator.forEach(i =&gt; (i.max = 100));
      return option;
    },
    submitHero: function() {
      if (this.id) {
        let hero = { ...this.hero };
        this.updateHero({ heroId: Number(this.id), source: hero });
        this.hero = Object.assign(this.hero, hero);
      } else {
        let hero = { ...this.hero };
        this.appendHero({ heroObj: hero });
        this.hero.name = &quot;&quot;;
        this.hero.quality = {};
      }
      goBack()
    },
    randomHeroQuality: function() {
      this.hero.quality = {
        &#x901F;&#x5EA6;: random100(),
        &#x6210;&#x957F;&#x6027;: random100(),
        &#x6301;&#x4E45;&#x529B;: random100(),
        &#x7834;&#x574F;&#x529B;: random100(),
        &#x7CBE;&#x5BC6;&#x5EA6;: random100(),
        &#x5C04;&#x7A0B;&#x8DDD;&#x79BB;: random100()
      };
    },
    setCreatedHero: function(newVal, oldValVal) {
      if (newVal.name !== &quot;&quot; || Object.keys(newVal.quality).length !== 0) {
        if (this.id) {
        } else {
          sessionStorage.setItem(&quot;created_hero&quot;, JSON.stringify(newVal));
        }
      }
    },
    goBack: function() {
      window.history.length &gt; 1 ? this.$router.go(-1) : this.$router.push(&quot;/&quot;);
    }
  },
  watch: {
    id: function(newVal, oldVal) {
      if (newVal === null) {
        this.hero = {
          name: &quot;&quot;,
          quality: {}
        };
      }
    },
    hero: {
      handler: &quot;setCreatedHero&quot;,
      deep: true,
      immediate: true
    }
  },
  created: function() {
    if (this.id) {
      let heroId = Number(this.id);
      this.createdPromise = this.$axios.get(`/hero/${heroId}`);
    } else {
      let created_hero = sessionStorage.getItem(&quot;created_hero&quot;);
      if (created_hero){
        this.hero = JSON.parse(created_hero);
      } else {
      }
    }
  },

  mounted: async function() {
    if (this.id) {
      let heroId = Number(this.id);
      let response = await this.createdPromise;
      this.hero = response.data.result;
    }
  }
};
&lt;/script&gt;
</code></pre>
<h3 id="&#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;"><a name="&#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;" class="anchor-navigation-ex-anchor" href="#&#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. &#x63D0;&#x4EA4;&#x540E;&#x8FD4;&#x56DE;</h3>
<p>&#x5728;&#x7528;&#x6237;&#x63D0;&#x4EA4;&#x597D;&#x4FEE;&#x6539;&#x6216;&#x8005;&#x65B0;&#x589E;&#x540E;,&#x7528;&#x6237;&#x5728;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x4E0A;&#x7684;&#x5DE5;&#x4F5C;&#x5C31;&#x5DF2;&#x7ECF;&#x7ED3;&#x675F;&#x4E86;,&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x81EA;&#x52A8;&#x9000;&#x51FA;&#x8FD9;&#x4E2A;&#x8BE6;&#x60C5;&#x9875;.&#x8FD9;&#x8FB9;&#x6211;&#x4EEC;&#x5728;submit&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x79CD;&#x590D;&#x7528;goBack&#x5373;&#x53EF;</p>
<h2 id="&#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;"><a name="&#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;" class="anchor-navigation-ex-anchor" href="#&#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x5229;&#x7528;sse&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;</h2>
<p>&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x5176;&#x5B9E;&#x90FD;&#x662F;&#x62FF;&#x6211;&#x4EEC;&#x5411;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x6765;&#x7684;&#x82F1;&#x96C4;&#x5217;&#x8868;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x7684;&#x5C55;&#x793A;.&#x4ED6;&#x4EEC;&#x90FD;&#x4F1A;&#x4F7F;&#x7528;&#x94A9;&#x5B50;<code>created</code>&#x5728;&#x6BCF;&#x6B21;&#x8FDB;&#x5165;&#x9875;&#x9762;&#x65F6;&#x62C9;&#x53D6;&#x66F4;&#x65B0;&#x8FD9;&#x4E2A;&#x6570;&#x636E;.
&#x8FD9;&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;,&#x4F46;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x597D;--&#x6BCF;&#x6B21;&#x62C9;&#x53D6;&#x7684;&#x90FD;&#x662F;&#x5F53;&#x65F6;&#x7684;&#x5168;&#x91CF;&#x6570;&#x636E;,&#x5728;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#x6570;&#x636E;&#x589E;&#x91CF;&#x5F88;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5C31;&#x5F88;&#x96BE;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#x4E86;.&#x6709;&#x4EC0;&#x4E48;&#x529E;&#x6CD5;&#x5462;?</p>
<p>&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;websocket,&#x4F46;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x670D;&#x52A1;&#x7AEF;&#x5927;&#x6539;,&#x5E76;&#x4E0D;&#x80FD;&#x5E73;&#x987A;&#x7684;&#x8FC1;&#x79FB;,&#x800C;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x8981;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x63A8;&#x9001;&#x529F;&#x80FD;&#x800C;&#x5DF2;.&#x8FD9;&#x79CD;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" target="_blank">sse</a>&#x6280;&#x672F;&#x4E86;.&#x8FD9;&#x4E2A;&#x6280;&#x672F;&#x5728;&#x9664;&#x5FAE;&#x8F6F;&#x5BB6;&#x6D4F;&#x89C8;&#x5668;&#x5916;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x4E0A;&#x90FD;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;.</p>
<p>&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x517C;&#x5BB9;&#x6027;,&#x6211;&#x4EEC;&#x80AF;&#x5B9A;&#x8FD8;&#x662F;&#x4F1A;&#x4FDD;&#x7559;&#x539F;&#x6765;&#x7684;&#x903B;&#x8F91;,&#x4F46;&#x4F1A;&#x4E3A;&#x4F7F;&#x7528;&#x65B0;&#x6280;&#x672F;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x66F4;&#x597D;&#x7684;&#x4F53;&#x9A8C;.&#x6211;&#x4EEC;&#x4FEE;&#x6539;&#x6211;&#x4EEC;&#x7684;api&#x670D;&#x52A1;&#x5668;,&#x5728;&#x5176;&#x4E2D;&#x65B0;&#x589E;&#x8FD4;&#x56DE;&#x6D41;&#x7684;&#x90E8;&#x5206;,&#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x6D41;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x7684;&#x5168;&#x91CF;&#x6570;&#x636E;,
&#x4E4B;&#x540E;&#x7684;&#x6BCF;&#x6B21;&#x63A8;&#x9001;&#x5219;&#x662F;&#x63D0;&#x4F9B;&#x5BF9;&#x73B0;&#x6709;&#x8FD9;&#x4EFD;&#x5168;&#x91CF;&#x6570;&#x636E;&#x7684;&#x4FEE;&#x6539;&#x4E8B;&#x4EF6;&#x6570;&#x636E;,&#x4EE5;&#x4FDD;&#x6301;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5B9E;&#x65F6;&#x540C;&#x6B65;;
&#x800C;&#x670D;&#x52A1;&#x7AEF;&#x6211;&#x4EEC;&#x63D0;&#x4EA4;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;,&#x5305;&#x62EC;&#x521B;&#x5EFA;,&#x66F4;&#x65B0;,&#x5220;&#x9664;,&#x8FD9;&#x4E9B;&#x9664;&#x4E86;&#x5165;&#x5E93;&#x5199;&#x5165;&#x6570;&#x636E;&#x5E93;&#x5916;,&#x4E5F;&#x4F1A;&#x8FD4;&#x9001;&#x4E00;&#x4EFD;&#x6D88;&#x606F;&#x5230;redis&#x7684;pub/sub&#x6A21;&#x5F0F;.
&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6D41;&#x90E8;&#x5206;,&#x6211;&#x4EEC;&#x76D1;&#x542C;&#x8FD9;&#x4E2A;channel,&#x4E00;&#x65E6;&#x6709;&#x65B0;&#x7684;&#x4E8B;&#x4EF6;&#x6570;&#x636E;,&#x6211;&#x4EEC;&#x7684;&#x6D41;&#x5C31;&#x4F1A;&#x5C06;&#x5176;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;.</p>
<p>&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8BFB;&#x5165;&#x6D41;,&#x76D1;&#x542C;&#x597D;&#x5176;&#x4E2D;&#x7684;&#x4E8B;&#x4EF6;&#x5E76;&#x54CD;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5373;&#x53EF;.&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x540C;&#x6B65;&#x7528;&#x7684;<code>action</code>:</p>
<pre><code class="lang-js">    syncHerosBySSE(context){
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initEventSource</span>(<span class="hljs-params">url = &quot;http:<span class="hljs-comment">//localhost:5000/stream&quot;) {</span>
            let evtSource = new EventSource(url, { withCredentials: true }</span>)
            <span class="hljs-title">evtSource</span>.<span class="hljs-title">onmessage</span> = <span class="hljs-title">function</span> (<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">let</span> { status, result } = <span class="hljs-built_in">JSON</span>.parse(e.data)
                <span class="hljs-keyword">switch</span> (status) {
                    <span class="hljs-keyword">case</span> <span class="hljs-number">200</span>: {
                        context.commit(<span class="hljs-string">&apos;syncHeros&apos;</span>, { heros: result })
                    } <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">case</span> <span class="hljs-number">100</span>: {
                        <span class="hljs-keyword">let</span> { event, hero } = result
                        <span class="hljs-keyword">switch</span> (event) {
                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;create&quot;</span>: {
                                context.commit(<span class="hljs-string">&apos;appendHero&apos;</span>, { heroObj: hero })
                            } <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;update&quot;</span>: {
                                context.commit(<span class="hljs-string">&apos;updateHero&apos;</span>, { heroId: hero.id, source: { name: hero.name } })
                            } <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;delete&quot;</span>: {
                                context.commit(<span class="hljs-string">&apos;deleteHero&apos;</span>, { heroId: hero.id })
                            } <span class="hljs-keyword">break</span>;
                            <span class="hljs-keyword">default</span>: {
                                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`unknown event <span class="hljs-subst">${event}</span>`</span>)
                            } <span class="hljs-keyword">break</span>;

                        }
                    } <span class="hljs-keyword">break</span>;
                    <span class="hljs-keyword">default</span>: {
                        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`unknown code <span class="hljs-subst">${status}</span>`</span>)
                    } <span class="hljs-keyword">break</span>;
                }
            }
            evtSource.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                <span class="hljs-keyword">if</span> (e.readyState == EventSource.CLOSED) {
                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Connection lost. reconnect...&quot;</span>)
                    evtSource.close();
                    initEventSource()
                } <span class="hljs-keyword">else</span>{
                    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;error&apos;</span>, e);
                    evtSource.close();
                }
            }
            evtSource.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;sse reconnected&apos;</span>, e);
            }
        }
        initEventSource()
    },
</code></pre>
<p>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x53EA;&#x9700;&#x8981;&#x5728;App&#x8282;&#x70B9;&#x521B;&#x5EFA;&#x65F6;&#x542F;&#x52A8;&#x4E00;&#x6B21;&#x5373;&#x53EF;,&#x6211;&#x4EEC;&#x5C06;&#x5176;&#x6302;&#x5728;App.vue&#x7684;<code>created</code>&#x65B9;&#x6CD5;&#x4E0A;.</p>
<p>&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x8981;&#x6D4F;&#x89C8;&#x5668;&#x652F;&#x6301;SSE,&#x6240;&#x4EE5;&#x5148;&#x8981;&#x6709;&#x4E2A;&#x5224;&#x65AD;:</p>
<pre><code class="lang-js">created: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    ...
    if (<span class="hljs-built_in">window</span>.EventSource){
      <span class="hljs-keyword">this</span>.$store.dispatch(<span class="hljs-string">&quot;herolist/syncHerosBySSE&quot;</span>);
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;browser not support sse, use api&quot;</span>)
      <span class="hljs-keyword">this</span>.$store.dispatch(<span class="hljs-string">&quot;herolist/syncHeros&quot;</span>);
    }
    ...
  }
</code></pre>
<p>&#x5176;&#x4ED6;&#x7684;&#x4E24;&#x4E2A;&#x7EC4;&#x4EF6;<code>Dashboard.vue</code>&#x548C;<code>Herolist.vue</code>&#x6211;&#x4EEC;&#x4E5F;&#x9700;&#x8981;&#x540C;&#x6837;&#x5904;&#x7406;&#x4E0B;&#x8C03;&#x7528;<code>this.$store.dispatch(&quot;herolist/syncHeros&quot;)</code>&#x7684;&#x903B;&#x8F91;.</p>
<h2 id="&#x603B;&#x7ED3;"><a name="&#x603B;&#x7ED3;" class="anchor-navigation-ex-anchor" href="#&#x603B;&#x7ED3;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. &#x603B;&#x7ED3;</h2>
<p>&#x81F3;&#x6B64;,&#x6211;&#x4EEC;&#x7684;&#x82F1;&#x96C4;&#x6307;&#x5357;&#x9879;&#x76EE;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x5DF2;&#x7ECF;&#x544A;&#x4E00;&#x6BB5;&#x843D;&#x4E86;.&#x8FD9;&#x4E00;&#x90E8;&#x5206;,&#x6211;&#x4EEC;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;vue.js&#x7684;&#x5B8C;&#x6574;&#x7684;&#x524D;&#x7AEF;&#x9879;&#x76EE;,&#x4ECE;&#x7EC4;&#x4EF6;&#x5230;&#x6570;&#x636E;&#x518D;&#x5230;&#x8DEF;&#x7531;;&#x4ECE;&#x5B8C;&#x6210;&#x529F;&#x80FD;&#x5230;&#x4F18;&#x5316;&#x4EA4;&#x4E92;&#x4F53;&#x9A8C;,&#x518D;&#x5230;&#x4F7F;&#x7528;SSE&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x6548;&#x7387;.
&#x771F;&#x5B9E;&#x4E00;&#x6BB5;&#x6F2B;&#x957F;&#x7684;&#x65C5;&#x7A0B;.&#x4F46;&#x73B0;&#x5728;&#x79BB;&#x7ED3;&#x675F;&#x8FD8;&#x8FDC;,&#x8FD9;&#x624D;&#x53EA;&#x662F;&#x57FA;&#x4E8E;vue&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x9879;&#x76EE;&#x7684;&#x5F00;&#x7AEF;,&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x90E8;&#x5206;&#x6211;&#x4EEC;&#x5C06;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316;&#x6211;&#x4EEC;&#x7684;&#x82F1;&#x96C4;&#x6307;&#x5357;&#x9879;&#x76EE;,&#x4F7F;&#x5176;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;pwa&#x7F51;&#x7AD9;. </p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; hsz 2019 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2020-01-17 21:28:12
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="属性展示.html" class="navigation navigation-prev " aria-label="Previous page: 属性展示">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../使用Javascript搭建后端服务/" class="navigation navigation-next " aria-label="Next page: 使用Javascript搭建后端服务">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"优化项目","level":"1.4.4.8","depth":3,"next":{"title":"使用Javascript搭建后端服务","level":"1.5","depth":1,"path":"使用Javascript搭建后端服务/README.md","ref":"使用Javascript搭建后端服务/README.md","articles":[{"title":"http接口服务","level":"1.5.1","depth":2,"path":"使用Javascript搭建后端服务/http接口服务.md","ref":"使用Javascript搭建后端服务/http接口服务.md","articles":[]},{"title":"Websocket接口服务","level":"1.5.2","depth":2,"path":"使用Javascript搭建后端服务/Websocket接口服务.md","ref":"使用Javascript搭建后端服务/Websocket接口服务.md","articles":[]},{"title":"GRpc接口服务","level":"1.5.3","depth":2,"path":"使用Javascript搭建后端服务/GRpc接口服务.md","ref":"使用Javascript搭建后端服务/GRpc接口服务.md","articles":[]}]},"previous":{"title":"属性展示","level":"1.4.4.7","depth":3,"path":"web前端技术/Vue/属性展示.md","ref":"web前端技术/Vue/属性展示.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","advanced-emoji","github","github-buttons","katex","splitter","expandable-chapters-small","tbfed-pagefooter","-sharing","donate","sitemap-general","anchors","anchor-navigation-ex"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy hsz 2019","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"http://blog.hszofficial.site/TutorialForJavascript"},"splitter":{},"search-pro":{"cutWordLib":"nodejieba","defineWord":["Gitbook Use"]},"donate":{"title":"","button":"赏","wechat":"http://blog.hszofficial.site/img/wechat_donate.jpg","alipay":"http://blog.hszofficial.site/img/zhifubao_donate.jpg","wechatText":"微信打赏","alipayText":"支付宝打赏"},"sitemap-general":{"prefix":"http://blog.hszofficial.site/TutorialForJavascript/"},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"showLevel":true,"associatedWithSummary":true,"mode":"float","showGoTop":true,"printLog":false,"multipleH1":true,"float":{"floatIcon":"fa fa-navicon","showLevelIcon":true,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"},"pageTop":{"showLevelIcon":false,"mode":"float","pageTop":{"showLevelIcon":false,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"},"level1Icon":"","showLevel":true,"level2Icon":"","level3Icon":"","associatedWithSummary":true,"float":{"showLevelIcon":true,"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right"}}},"github-buttons":{"repo":"hsz1273327/TutorialForJavascript","types":["star","watch","fork"],"size":"small"},"expandable-chapters-small":{},"advanced-emoji":{"embedEmojis":false},"sharing":{"weibo":false,"facebook":false,"twitter":false,"google":true,"instapaper":false,"vk":false,"all":["google"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"hsz","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Javascript攻略","language":"zh-hans","links":{"sidebar":{"Home":"http://blog.hszofficial.site/"}},"gitbook":">=2.0.0","description":"Javascript运行环境的介绍"},"file":{"path":"web前端技术/Vue/优化项目.md","mtime":"2020-01-17T13:28:12.851Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-01-17T13:49:11.885Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

